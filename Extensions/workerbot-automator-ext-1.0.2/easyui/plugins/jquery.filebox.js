/* Copyright (C) 2023 by WorkerBot.AI */
!function(t){var e=0;function o(e){var o=t.data(e,"filebox"),i=o.options;o.filebox.find(".textbox-value").remove(),i.oldValue="";var n=t('<input type="file" class="textbox-value">').appendTo(o.filebox);return n.attr("id",i.fileboxId).attr("name",t(e).attr("textboxName")||""),n.attr("accept",i.accept),n.attr("capture",i.capture),i.multiple&&n.attr("multiple","multiple"),n.change((function(){var o=this.value;this.files&&(o=t.map(this.files,(function(t){return t.name})).join(i.separator)),t(e).filebox("setText",o),i.onChange.call(e,o,i.oldValue),i.oldValue=o})),n}t.fn.filebox=function(i,n){if("string"==typeof i){var a=t.fn.filebox.methods[i];return a?a(this,n):this.textbox(i,n)}return i=i||{},this.each((function(){var n=t.data(this,"filebox");n?t.extend(n.options,i):t.data(this,"filebox",{options:t.extend({},t.fn.filebox.defaults,t.fn.filebox.parseOptions(this),i)}),function(i){var n=t.data(i,"filebox"),a=n.options;a.fileboxId="filebox_file_id_"+ ++e,t(i).addClass("filebox-f").textbox(a),t(i).textbox("textbox").attr("readonly","readonly"),n.filebox=t(i).next().addClass("filebox");var l=o(i),r=t(i).filebox("button");r.length&&(t('<label class="filebox-label" for="'+a.fileboxId+'"></label>').appendTo(r),r.linkbutton("options").disabled?l._propAttr("disabled",!0):l._propAttr("disabled",!1))}(this)}))},t.fn.filebox.methods={options:function(e){var o=e.textbox("options");return t.extend(t.data(e[0],"filebox").options,{width:o.width,value:o.value,originalValue:o.originalValue,disabled:o.disabled,readonly:o.readonly})},clear:function(e){return e.each((function(){t(this).textbox("clear"),o(this)}))},reset:function(e){return e.each((function(){t(this).filebox("clear")}))},setValue:function(t){return t},setValues:function(t){return t},files:function(t){return t.next().find(".textbox-value")[0].files}},t.fn.filebox.parseOptions=function(e){var o=t(e);return t.extend({},t.fn.textbox.parseOptions(e),t.parser.parseOptions(e,["accept","capture","separator"]),{multiple:!!o.attr("multiple")||void 0})},t.fn.filebox.defaults=t.extend({},t.fn.textbox.defaults,{buttonIcon:null,buttonText:"Choose File",buttonAlign:"right",inputEvents:{},accept:"",capture:"",separator:",",multiple:!1})}(jQuery);