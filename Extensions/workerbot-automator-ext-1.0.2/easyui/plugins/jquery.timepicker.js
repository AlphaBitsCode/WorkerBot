/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){function t(t){var n=e.data(t,"timepicker").options;e(t).addClass("timepicker-f").combo(e.extend({},n,{onShowPanel:function(){var a,o;o=e(a=this).timepicker("options"),e(a).combo("panel")._unbind(".timepicker")._bind("click.timepicker",(function(t){if(e(t.target).hasClass("datebox-button-a")){var i=parseInt(e(t.target).attr("datebox-button-index"));o.buttons[i].handler.call(t.target,a)}})),function(t){var i=e(t).combo("panel");if(i.children("div.datebox-button").length)return;for(var a=e('<div class="datebox-button"><table cellspacing="0" cellpadding="0" style="width:100%"><tr></tr></table></div>').appendTo(i).find("tr"),o=0;o<n.buttons.length;o++){var s=e("<td></td>").appendTo(a),r=n.buttons[o];e('<a class="datebox-button-a" href="javascript:;"></a>').html(e.isFunction(r.text)?r.text(t):r.text).appendTo(s).attr("datebox-button-index",o)}a.find("td").css("width",100/n.buttons.length+"%")}(t),i(t,e(t).timepicker("getValue"))}})),e(t).timepicker("initValue",n.value)}function i(t,i){var n=e(t).data("timepicker").options;if(i){var o=i.split(" "),s=o[0].split(":");n.selectingHour=parseInt(s[0],10),n.selectingMinute=parseInt(s[1],10),n.selectingAmpm=o[1]}else n.selectingHour=12,n.selectingMinute=0,n.selectingAmpm=n.ampm[0];a(t)}function n(t){var i=e(t).data("timepicker").options,n=i.selectingHour,a=i.selectingMinute,o=i.selectingAmpm;o||(o=i.ampm[0]);var s=(n<10?"0"+n:n)+":"+(a<10?"0"+a:a);return i.hour24||(s+=" "+o),s}function a(t){var i=e(t).data("timepicker").options,n=e(t).combo("panel");if(!(o=n.children(".timepicker-panel")).length)var o=e('<div class="timepicker-panel f-column"></div>').prependTo(n);if(o.empty(),"auto"!=i.panelHeight){var s=n.height()-n.find(".datebox-button").outerHeight();o._outerHeight(s)}!function(t){var i=e(t).data("timepicker").options,n=e(t).combo("panel").find(".timepicker-panel"),a=i.selectingHour,o=i.selectingMinute;e('<div class="panel-header f-noshrink f-row f-content-center"><div class="title title-hour">'+(a<10?"0"+a:a)+'</div><div class="sep">:</div><div class="title title-minute">'+(o<10?"0"+o:o)+'</div><div class="ampm f-column"><div class="title title-am">'+i.ampm[0]+'</div><div class="title title-pm">'+i.ampm[1]+"</div></div></div>").appendTo(n);var s=n.find(".panel-header");"hour"==i.selectingType?s.find(".title-hour").addClass("title-selected"):s.find(".title-minute").addClass("title-selected");i.selectingAmpm==i.ampm[0]&&s.find(".title-am").addClass("title-selected");i.selectingAmpm==i.ampm[1]&&s.find(".title-pm").addClass("title-selected");i.hour24&&s.find(".ampm").hide()}(t),function(t){var i=e(t).data("timepicker").options,n=e(t).combo("panel").find(".timepicker-panel"),a=e('<div class="clock-wrap f-full f-column f-content-center"></div>').appendTo(n),o=a.outerWidth(),s=a.outerHeight(),r=Math.min(o,s)-20,c=r/2;o=r,s=r;var l="hour"==i.selectingType?i.selectingHour:i.selectingMinute,p=l/("hour"==i.selectingType?12:60)*360,u={transform:"rotate("+(p=parseFloat(p).toFixed(4))+"deg)"};i.hour24&&"hour"==i.selectingType&&(0==l?u.top=i.hourDistance[0]+"px":l<=12&&(u.top=i.hourDistance[1]+"px"));var d={width:o+"px",height:s+"px",marginLeft:-o/2+"px",marginTop:-s/2+"px"},m=[];m.push('<div class="clock">'),m.push('<div class="center"></div>'),m.push('<div class="hand">'),m.push('<div class="drag"></div>'),m.push("</div>");var h=T();if(i.hour24&&"hour"==i.selectingType){for(var f=0;f<h.length;f++){var v=parseInt(h[f],10);24==(v+=12)&&(v="00");var g="item f-column f-content-center";v==l&&(g+=" item-selected");p=v/("hour"==i.selectingType?12:60)*360*Math.PI/180;var k=(c-20)*Math.sin(p),x=-(c-20)*Math.cos(p);p=parseFloat(p).toFixed(4);var b={transform:"translate("+(k=parseFloat(k).toFixed(4))+"px,"+(x=parseFloat(x).toFixed(4))+"px)"};b="transform:translate("+k+"px,"+x+"px)";m.push('<div class="'+g+'" style="'+b+'">'+v+"</div>")}c-=i.hourDistance[1]-i.hourDistance[0]}for(f=0;f<h.length;f++){g="item f-column f-content-center";(v=h[f])==l&&(g+=" item-selected");p=v/("hour"==i.selectingType?12:60)*360*Math.PI/180,k=(c-20)*Math.sin(p),x=-(c-20)*Math.cos(p);p=parseFloat(p).toFixed(4);b={transform:"translate("+(k=parseFloat(k).toFixed(4))+"px,"+(x=parseFloat(x).toFixed(4))+"px)"},b="transform:translate("+k+"px,"+x+"px)";m.push('<div class="'+g+'" style="'+b+'">'+v+"</div>")}function T(){var e=[];if("hour"==i.selectingType){for(var t=0;t<12;t++)e.push(String(t));e[0]="12"}else{for(t=0;t<60;t+=5)e.push(t<10?"0"+t:String(t));e[0]="00"}return e}m.push("</div>"),a.html(m.join("")),a.find(".clock").css(d),a.find(".hand").css(u)}(t),o.off(".timepicker"),o.on("click.timepicker",".title-hour",(function(e){i.selectingType="hour",a(t)})).on("click.timepicker",".title-minute",(function(e){i.selectingType="minute",a(t)})).on("click.timepicker",".title-am",(function(e){i.selectingAmpm=i.ampm[0],a(t)})).on("click.timepicker",".title-pm",(function(e){i.selectingAmpm=i.ampm[1],a(t)})).on("click.timepicker",".item",(function(n){var o=parseInt(e(this).text(),10);"hour"==i.selectingType?i.selectingHour=o:i.selectingMinute=o,a(t)}))}e.fn.timepicker=function(i,n){if("string"==typeof i){var a=e.fn.timepicker.methods[i];return a?a(this,n):this.combo(i,n)}return i=i||{},this.each((function(){var n=e.data(this,"timepicker");n?e.extend(n.options,i):e.data(this,"timepicker",{options:e.extend({},e.fn.timepicker.defaults,e.fn.timepicker.parseOptions(this),i)}),t(this)}))},e.fn.timepicker.methods={options:function(t){var i=t.combo("options");return e.extend(e.data(t[0],"timepicker").options,{width:i.width,height:i.height,originalValue:i.originalValue,disabled:i.disabled,readonly:i.readonly})},initValue:function(t,a){return t.each((function(){var t=e(this).timepicker("options");t.value=a,i(this,a),a&&(t.value=n(this),e(this).combo("initValue",t.value).combo("setText",t.value))}))},setValue:function(t,a){return t.each((function(){var t,o,s;o=a,s=e(t=this).data("timepicker").options,i(t,o),s.value=n(t),e(t).combo("setValue",s.value).combo("setText",s.value)}))},reset:function(t){return t.each((function(){var t=e(this).timepicker("options");e(this).timepicker("setValue",t.originalValue)}))}},e.fn.timepicker.parseOptions=function(t){return e.extend({},e.fn.combo.parseOptions(t),e.parser.parseOptions(t,[{hour24:"boolean"}]))},e.fn.timepicker.defaults=e.extend({},e.fn.combo.defaults,{closeText:"Close",okText:"Ok",buttons:[{text:function(t){return e(t).timepicker("options").okText},handler:function(t){e(t).timepicker("setValue",n(t)),e(this).closest("div.combo-panel").panel("close")}},{text:function(t){return e(t).timepicker("options").closeText},handler:function(t){e(this).closest("div.combo-panel").panel("close")}}],editable:!1,ampm:["am","pm"],value:"",selectingHour:12,selectingMinute:0,selectingType:"hour",hour24:!1,hourDistance:[20,50]})}(jQuery);