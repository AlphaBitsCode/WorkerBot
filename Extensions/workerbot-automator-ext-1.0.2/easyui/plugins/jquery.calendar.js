/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){function a(a,t){var r=e.data(a,"calendar").options,l=e(a);t&&e.extend(r,{width:t.width,height:t.height}),l._size(r,l.parent()),l.find(".calendar-body")._outerHeight(l.height()-l.find(".calendar-header")._outerHeight()),l.find(".calendar-menu").is(":visible")&&n(a)}function n(a){var n=e.data(a,"calendar").options;if(e(a).find(".calendar-menu").show(),e(a).find(".calendar-menu-month-inner").is(":empty")){e(a).find(".calendar-menu-month-inner").empty();for(var t=e('<table class="calendar-mtable"></table>').appendTo(e(a).find(".calendar-menu-month-inner")),r=0,l=0;l<3;l++)for(var d=e("<tr></tr>").appendTo(t),s=0;s<4;s++)e('<td class="calendar-nav calendar-menu-month"></td>').html(n.months[r++]).attr("abbr",r).appendTo(d)}var c=e(a).find(".calendar-body"),i=e(a).find(".calendar-menu"),o=i.find(".calendar-menu-year-inner"),h=i.find(".calendar-menu-month-inner");o.find("input").val(n.year).focus(),h.find("td.calendar-selected").removeClass("calendar-selected"),h.find("td:eq("+(n.month-1)+")").addClass("calendar-selected"),i._outerWidth(c._outerWidth()),i._outerHeight(c._outerHeight()),h._outerHeight(i.height()-o._outerHeight())}function t(a){var n=e.data(a,"calendar").options;n.current&&!n.validator.call(a,n.current)&&(n.current=null);var t=new n.Date,r=t.getFullYear()+","+(t.getMonth()+1)+","+t.getDate(),l=n.current?n.current.getFullYear()+","+(n.current.getMonth()+1)+","+n.current.getDate():"",d=6-n.firstDay,s=d+1;d>=7&&(d-=7),s>=7&&(s-=7),e(a).find(".calendar-title span").html(n.months[n.month-1]+" "+n.year);var c=e(a).find("div.calendar-body");c.children("table").remove();var i=['<table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0">'];i.push("<thead><tr>"),n.showWeek&&i.push('<th class="calendar-week">'+n.weekNumberHeader+"</th>");for(var o=n.firstDay;o<n.weeks.length;o++)i.push("<th>"+n.weeks[o]+"</th>");for(o=0;o<n.firstDay;o++)i.push("<th>"+n.weeks[o]+"</th>");i.push("</tr></thead>"),i.push("<tbody>");var h=function(a,n,t){for(var r=e.data(a,"calendar").options,l=[],d=new r.Date(n,t,0).getDate(),s=1;s<=d;s++)l.push([n,t,s]);for(var c=[],i=[],o=-1;l.length>0;){var h=l.shift();i.push(h);var u=new r.Date(h[0],h[1]-1,h[2]).getDay();o==u?u=0:u==(0==r.firstDay?7:r.firstDay)-1&&(c.push(i),i=[]),o=u}i.length&&c.push(i);var f=c[0];if(f.length<7)for(;f.length<7;){var v=f[0];h=new r.Date(v[0],v[1]-1,v[2]-1),f.unshift([h.getFullYear(),h.getMonth()+1,h.getDate()])}else{for(v=f[0],i=[],s=1;s<=7;s++)h=new r.Date(v[0],v[1]-1,v[2]-s),i.unshift([h.getFullYear(),h.getMonth()+1,h.getDate()]);c.unshift(i)}for(var m=c[c.length-1];m.length<7;){var p=m[m.length-1];h=new r.Date(p[0],p[1]-1,p[2]+1),m.push([h.getFullYear(),h.getMonth()+1,h.getDate()])}if(c.length<6){for(p=m[m.length-1],i=[],s=1;s<=7;s++)h=new r.Date(p[0],p[1]-1,p[2]+s),i.push([h.getFullYear(),h.getMonth()+1,h.getDate()]);c.push(i)}return c}(a,n.year,n.month);for(o=0;o<h.length;o++){var u=h[o],f="";if(0==o?f="calendar-first":o==h.length-1&&(f="calendar-last"),i.push('<tr class="'+f+'">'),n.showWeek){var v=n.getWeekNumber(new n.Date(u[0][0],parseInt(u[0][1])-1,u[0][2]));i.push('<td class="calendar-week">'+v+"</td>")}for(var m=0;m<u.length;m++){var p=u[m],g=p[0]+","+p[1]+","+p[2],y=new n.Date(p[0],parseInt(p[1])-1,p[2]),b=n.formatter.call(a,y),D=n.styler.call(a,y),C="",w="";"string"==typeof D?w=D:D&&(C=D.class||"",w=D.style||"");f="calendar-day";n.year==p[0]&&n.month==p[1]||(f+=" calendar-other-month"),g==r&&(f+=" calendar-today"),g==l&&(f+=" calendar-selected"),m==d?f+=" calendar-saturday":m==s&&(f+=" calendar-sunday"),0==m?f+=" calendar-first":m==u.length-1&&(f+=" calendar-last"),f+=" "+C,n.validator.call(a,y)||(f+=" calendar-disabled"),i.push('<td class="'+f+'" abbr="'+g+'" style="'+w+'">'+b+"</td>")}i.push("</tr>")}i.push("</tbody>"),i.push("</table>"),c.append(i.join("")),c.children("table.calendar-dtable").prependTo(c),n.onNavigate.call(a,n.year,n.month)}var r;e.fn.calendar=function(r,l){return"string"==typeof r?e.fn.calendar.methods[r](this,l):(r=r||{},this.each((function(){var l,d=e.data(this,"calendar");d?e.extend(d.options,r):(d=e.data(this,"calendar",{options:e.extend({},e.fn.calendar.defaults,e.fn.calendar.parseOptions(this),r)}),e(l=this).addClass("calendar").html('<div class="calendar-header"><div class="calendar-nav calendar-prevmonth"></div><div class="calendar-nav calendar-nextmonth"></div><div class="calendar-nav calendar-prevyear"></div><div class="calendar-nav calendar-nextyear"></div><div class="calendar-title"><span class="calendar-text"></span></div></div><div class="calendar-body"><div class="calendar-menu"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text"></span><span class="calendar-nav calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div>'),e(l)._bind("_resize",(function(n,t){return(e(this).hasClass("easyui-fluid")||t)&&a(l),!1}))),0==d.options.border&&e(this).addClass("calendar-noborder"),a(this),function(a){var r=e.data(a,"calendar").options,l=e(a).find(".calendar-menu");function d(a){var n=e(a).closest(".calendar-day");return n.length?n:e(a)}function s(n){var l=e(a).find(".calendar-menu"),d=l.find(".calendar-menu-year").val(),s=l.find(".calendar-selected").attr("abbr");isNaN(d)||(r.year=parseInt(d),r.month=parseInt(s),t(a)),n&&l.hide()}function c(e){r.year+=e,t(a),l.find(".calendar-menu-year").val(r.year)}function i(e){r.month+=e,r.month>12?(r.year++,r.month=1):r.month<1&&(r.year--,r.month=12),t(a),l.find("td.calendar-selected").removeClass("calendar-selected"),l.find("td:eq("+(r.month-1)+")").addClass("calendar-selected")}l.find(".calendar-menu-year")._unbind(".calendar")._bind("keypress.calendar",(function(e){13==e.keyCode&&s(!0)})),e(a)._unbind(".calendar")._bind("mouseover.calendar",(function(e){var a=d(e.target);(a.hasClass("calendar-nav")||a.hasClass("calendar-text")||a.hasClass("calendar-day")&&!a.hasClass("calendar-disabled"))&&a.addClass("calendar-nav-hover")}))._bind("mouseout.calendar",(function(e){var a=d(e.target);(a.hasClass("calendar-nav")||a.hasClass("calendar-text")||a.hasClass("calendar-day")&&!a.hasClass("calendar-disabled"))&&a.removeClass("calendar-nav-hover")}))._bind("click.calendar",(function(e){var o=d(e.target);if(o.hasClass("calendar-menu-next")||o.hasClass("calendar-nextyear"))c(1);else if(o.hasClass("calendar-menu-prev")||o.hasClass("calendar-prevyear"))c(-1);else if(o.hasClass("calendar-menu-month"))l.find(".calendar-selected").removeClass("calendar-selected"),o.addClass("calendar-selected"),s(!0);else if(o.hasClass("calendar-prevmonth"))i(-1);else if(o.hasClass("calendar-nextmonth"))i(1);else if(o.hasClass("calendar-text"))l.is(":visible")?l.hide():n(a);else if(o.hasClass("calendar-day")){if(o.hasClass("calendar-disabled"))return;var h=r.current;o.closest("div.calendar-body").find(".calendar-selected").removeClass("calendar-selected"),o.addClass("calendar-selected");var u=o.attr("abbr").split(","),f=parseInt(u[0]),v=parseInt(u[1]),m=parseInt(u[2]);r.current=new r.Date(f,v-1,m),r.onSelect.call(a,r.current),h&&h.getTime()==r.current.getTime()||r.onChange.call(a,r.current,h),r.year==f&&r.month==v||(r.year=f,r.month=v,t(a))}}))}(this),t(this),e(this).find("div.calendar-menu").hide()})))},e.fn.calendar.methods={options:function(a){return e.data(a[0],"calendar").options},resize:function(e,n){return e.each((function(){a(this,n)}))},moveTo:function(a,n){return a.each((function(){var a=e(this).calendar("options");if(n){if(a.validator.call(this,n)){var t=a.current;e(this).calendar({year:n.getFullYear(),month:n.getMonth()+1,current:n}),t&&t.getTime()==n.getTime()||a.onChange.call(this,a.current,t)}}else{var r=new a.Date;e(this).calendar({year:r.getFullYear(),month:r.getMonth()+1,current:n})}}))}},e.fn.calendar.parseOptions=function(a){e(a);return e.extend({},e.parser.parseOptions(a,["weekNumberHeader",{firstDay:"number",fit:"boolean",border:"boolean",showWeek:"boolean"}]))},e.fn.calendar.defaults={Date:Date,width:180,height:180,fit:!1,border:!0,showWeek:!1,firstDay:0,weeks:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:(r=new Date,new Date(r.getFullYear(),r.getMonth(),r.getDate())),weekNumberHeader:"",getWeekNumber:function(e){var a=new Date(e.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var n=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((n-a)/864e5)/7)+1},formatter:function(e){return e.getDate()},styler:function(e){return""},validator:function(e){return!0},onSelect:function(e){},onChange:function(e,a){},onNavigate:function(e,a){}}}(jQuery);