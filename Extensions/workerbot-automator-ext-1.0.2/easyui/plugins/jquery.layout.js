/* Copyright (C) 2023 by WorkerBot.AI */
!function(t){var e=!1;function n(e,n){var a=t.data(e,"layout"),i=a.options,o=a.panels,l=t(e);n&&t.extend(i,{width:n.width,height:n.height}),"body"==e.tagName.toLowerCase()?l._size("fit"):l._size(i);var p={top:0,left:0,width:l.width(),height:l.height()};function h(t,e){if(t.length&&s(t)){var n=t.panel("options");t.panel("resize",{width:l.width(),height:n.height});var a=t.panel("panel").outerHeight();t.panel("move",{left:0,top:"n"==e?0:l.height()-a}),p.height-=a,"n"==e&&(p.top+=a,!n.split&&n.border&&p.top--),!n.split&&n.border&&p.height++}}function r(t,e){if(t.length&&s(t)){var n=t.panel("options");t.panel("resize",{width:n.width,height:p.height});var a=t.panel("panel").outerWidth();t.panel("move",{left:"e"==e?l.width()-a:0,top:p.top}),p.width-=a,"w"==e&&(p.left+=a,!n.split&&n.border&&p.left--),!n.split&&n.border&&p.width++}}h(s(o.expandNorth)?o.expandNorth:o.north,"n"),h(s(o.expandSouth)?o.expandSouth:o.south,"s"),r(s(o.expandEast)?o.expandEast:o.east,"e"),r(s(o.expandWest)?o.expandWest:o.west,"w"),o.center.panel("resize",p)}function a(e){var a=t(e);a.addClass("layout");var o=a.layout("options"),l=o.onAdd;o.onAdd=function(){},a.find(">div,>form>div").each((function(){var n,a;n=this,a=t.fn.layout.parsePanelOptions(n),"north,south,east,west,center".indexOf(a.region)>=0&&i(e,a,n)})),o.onAdd=l,a.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),a._bind("_resize",(function(a,i){return(t(this).hasClass("easyui-fluid")||i)&&n(e),!1}))}function i(a,i,l){i.region=i.region||"center";var p=t.data(a,"layout").panels,h=t(a),r=i.region;if(!p[r].length){var d=t(l);d.length||(d=t("<div></div>").appendTo(h));var u=t.extend({},t.fn.layout.paneldefaults,{width:d.length?parseInt(d[0].style.width)||d.outerWidth():"auto",height:d.length?parseInt(d[0].style.height)||d.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var e=t(this).panel("header").children("div.panel-tool");e.children("a.panel-tool-collapse").hide();var n={north:"up",south:"down",east:"right",west:"left"};if(n[r]){var i="layout-button-"+n[r],l=e.children("a."+i);l.length||(l=t('<a href="javascript:;"></a>').addClass(i).appendTo(e))._bind("click",{dir:r},(function(t){return o(a,t.data.dir),!1})),t(this).panel("options").collapsible?l.show():l.hide()}}},i,{cls:(i.cls||"")+" layout-panel layout-panel-"+r,bodyCls:(i.bodyCls||"")+" layout-body"});d.panel(u),p[r]=d;var c=d.panel("panel");d.panel("options").split&&c.addClass("layout-split-"+r),c.resizable(t.extend({},{handles:{north:"s",south:"n",east:"w",west:"e"}[r]||"",disabled:!d.panel("options").split,onStartResize:function(n){if(e=!0,"north"==r||"south"==r)var i=t(">div.layout-split-proxy-v",a);else i=t(">div.layout-split-proxy-h",a);var o={display:"block"};"north"==r?(o.top=parseInt(c.css("top"))+c.outerHeight()-i.height(),o.left=parseInt(c.css("left")),o.width=c.outerWidth(),o.height=i.height()):"south"==r?(o.top=parseInt(c.css("top")),o.left=parseInt(c.css("left")),o.width=c.outerWidth(),o.height=i.height()):"east"==r?(o.top=parseInt(c.css("top"))||0,o.left=parseInt(c.css("left"))||0,o.width=i.width(),o.height=c.outerHeight()):"west"==r&&(o.top=parseInt(c.css("top"))||0,o.left=c.outerWidth()-i.width(),o.width=i.width(),o.height=c.outerHeight()),i.css(o),t('<div class="layout-mask"></div>').css({left:0,top:0,width:h.width(),height:h.height()}).appendTo(h)},onResize:function(e){if("north"==r||"south"==r){var n=f(this);t(this).resizable("options").maxHeight=n;var i=t(">div.layout-split-proxy-v",a),o="north"==r?e.data.height-i.height():t(a).height()-e.data.height;i.css("top",o)}else{var l=f(this);t(this).resizable("options").maxWidth=l;i=t(">div.layout-split-proxy-h",a);var s="west"==r?e.data.width-i.width():t(a).width()-e.data.width;i.css("left",s)}return!1},onStopResize:function(t){h.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),d.panel("resize",t.data),n(a),e=!1,h.find(">div.layout-mask").remove()}},i)),h.layout("options").onAdd.call(a,r)}function f(e){var n="expand"+r.substring(0,1).toUpperCase()+r.substring(1),i=p.center,o="north"==r||"south"==r?"minHeight":"minWidth",l="north"==r||"south"==r?"maxHeight":"maxWidth",h="north"==r||"south"==r?"_outerHeight":"_outerWidth",d=t.parser.parseValue(l,p[r].panel("options")[l],t(a)),u=t.parser.parseValue(o,i.panel("options")[o],t(a)),c=i.panel("panel")[h]()-u;return s(p[n])?c+=p[n][h]()-1:c+=t(e)[h](),c>d&&(c=d),c}}function o(n,a,i){null==i&&(i="normal");var p=t.data(n,"layout"),h=p.panels,r=h[a],d=r.panel("options");if(0!=d.onBeforeCollapse.call(r)){var u="expand"+a.substring(0,1).toUpperCase()+a.substring(1);if(!h[u]){h[u]=function(e){var i={east:"left",west:"right",north:"down",south:"up"},o="north"==d.region||"south"==d.region,s="layout-button-"+i[e],p=t("<div></div>").appendTo(n);if(p.panel(t.extend({},t.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+e,title:"&nbsp;",titleDirection:d.titleDirection,iconCls:d.hideCollapsedContent?null:d.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:d.region,collapsedSize:d.collapsedSize,noheader:!o&&d.hideExpandTool,tools:o&&d.hideExpandTool?null:[{iconCls:s,handler:function(){return l(n,a),!1}}],onResize:function(){var e=t(this).children(".layout-expand-title");if(e.length){var n=t(this).children(".panel-icon"),a=n.length>0?n._outerHeight()+2:0;e._outerWidth(t(this).height()-a);var i=(t(this).width()-Math.min(e._outerWidth(),e._outerHeight()))/2,o=Math.max(e._outerWidth(),e._outerHeight());e.hasClass("layout-expand-title-down")&&(i+=Math.min(e._outerWidth(),e._outerHeight()),o=0),o+=a,e.css({left:i+"px",top:o+"px"})}}})),!d.hideCollapsedContent){var h="function"==typeof d.collapsedContent?d.collapsedContent.call(p[0],d.title):d.collapsedContent;o?p.panel("setTitle",h):p.html(h)}return p.panel("panel").hover((function(){t(this).addClass("layout-expand-over")}),(function(){t(this).removeClass("layout-expand-over")})),p}(a);var c=h[u].panel("panel");d.expandMode?c._bind("click",(function(){if("dock"==d.expandMode)l(n,a);else{r.panel("expand",!1).panel("open");var i=g();r.panel("resize",i.collapse),r.panel("panel")._unbind(".layout")._bind("mouseleave.layout",{region:a},(function(a){var i=this;p.collapseTimer=setTimeout((function(){t(i).stop(!0,!0),1!=e&&(t("body>div.combo-p>div.combo-panel:visible").length||o(n,a.data.region))}),p.options.collapseDelay)})),r.panel("panel").animate(i.expand,(function(){t(n).layout("options").onExpand.call(n,a)}))}return!1})):c.css("cursor","default")}var f=g();s(h[u])||h.center.panel("resize",f.resizeC),r.panel("panel").animate(f.collapse,i,(function(){r.panel("collapse",!1).panel("close"),h[u].panel("open").panel("resize",f.expandP),t(this)._unbind(".layout"),t(n).layout("options").onCollapse.call(n,a)}))}function g(){var e=t(n),i=h.center.panel("options"),o=d.collapsedSize;if("east"==a){var l=r.panel("panel")._outerWidth(),p=i.width+l-o;return!d.split&&d.border||p++,{resizeC:{width:p},expand:{left:e.width()-l},expandP:{top:i.top,left:e.width()-o,width:o,height:i.height},collapse:{left:e.width(),top:i.top,height:i.height}}}if("west"==a){l=r.panel("panel")._outerWidth(),p=i.width+l-o;return!d.split&&d.border||p++,{resizeC:{width:p,left:o-1},expand:{left:0},expandP:{left:0,top:i.top,width:o,height:i.height},collapse:{left:-l,top:i.top,height:i.height}}}if("north"==a){var u=r.panel("panel")._outerHeight(),c=i.height;return s(h.expandNorth)||(c+=u-o+(d.split||!d.border?1:0)),h.east.add(h.west).add(h.expandEast).add(h.expandWest).panel("resize",{top:o-1,height:c}),{resizeC:{top:o-1,height:c},expand:{top:0},expandP:{top:0,left:0,width:e.width(),height:o},collapse:{top:-u,width:e.width()}}}if("south"==a){u=r.panel("panel")._outerHeight(),c=i.height;return s(h.expandSouth)||(c+=u-o+(d.split||!d.border?1:0)),h.east.add(h.west).add(h.expandEast).add(h.expandWest).panel("resize",{height:c}),{resizeC:{height:c},expand:{top:e.height()-u},expandP:{top:e.height()-o,left:0,width:e.width(),height:o},collapse:{top:e.height(),width:e.width()}}}}}function l(e,a){var i=t.data(e,"layout").panels,o=i[a];if(0!=o.panel("options").onBeforeExpand.call(o)){var l="expand"+a.substring(0,1).toUpperCase()+a.substring(1);if(i[l]){i[l].panel("close"),o.panel("panel").stop(!0,!0),o.panel("expand",!1).panel("open");var s=function(){var n=t(e),l=i.center.panel("options");if("east"==a&&i.expandEast)return{collapse:{left:n.width(),top:l.top,height:l.height},expand:{left:n.width()-o.panel("panel")._outerWidth()}};if("west"==a&&i.expandWest)return{collapse:{left:-o.panel("panel")._outerWidth(),top:l.top,height:l.height},expand:{left:0}};if("north"==a&&i.expandNorth)return{collapse:{top:-o.panel("panel")._outerHeight(),width:n.width()},expand:{top:0}};if("south"==a&&i.expandSouth)return{collapse:{top:n.height(),width:n.width()},expand:{top:n.height()-o.panel("panel")._outerHeight()}}}();o.panel("resize",s.collapse),o.panel("panel").animate(s.expand,(function(){n(e),t(e).layout("options").onExpand.call(e,a)}))}}}function s(t){return!!t&&(!!t.length&&t.panel("panel").is(":visible"))}function p(e,a,i){var o=t(e).layout("panel",a);o.panel("options").split=i;var l="layout-split-"+a,s=o.panel("panel").removeClass(l);i&&s.addClass(l),s.resizable({disabled:!i}),n(e)}t.fn.layout=function(e,i){return"string"==typeof e?t.fn.layout.methods[e](this,i):(e=e||{},this.each((function(){var i=t.data(this,"layout");if(i)t.extend(i.options,e);else{var l=t.extend({},t.fn.layout.defaults,t.fn.layout.parseOptions(this),e);t.data(this,"layout",{options:l,panels:{center:t(),north:t(),south:t(),east:t(),west:t()}}),a(this)}n(this),function(e){var n=t.data(e,"layout"),a=n.options,i=n.panels,l=a.onCollapse;function s(t){var n=i[t];n.length&&n.panel("options").collapsed&&o(e,t,0)}a.onCollapse=function(){},s("east"),s("west"),s("north"),s("south"),a.onCollapse=l}(this)})))},t.fn.layout.methods={options:function(e){return t.data(e[0],"layout").options},resize:function(t,e){return t.each((function(){n(this,e)}))},panel:function(e,n){return t.data(e[0],"layout").panels[n]},collapse:function(t,e){return t.each((function(){o(this,e)}))},expand:function(t,e){return t.each((function(){l(this,e)}))},add:function(e,a){return e.each((function(){i(this,a),n(this),t(this).layout("panel",a.region).panel("options").collapsed&&o(this,a.region,0)}))},remove:function(e,a){return e.each((function(){!function(e,n){var a=t.data(e,"layout").panels;if(a[n].length){a[n].panel("destroy"),a[n]=t();var i="expand"+n.substring(0,1).toUpperCase()+n.substring(1);a[i]&&(a[i].panel("destroy"),a[i]=void 0),t(e).layout("options").onRemove.call(e,n)}}(this,a),n(this)}))},split:function(t,e){return t.each((function(){p(this,e,!0)}))},unsplit:function(t,e){return t.each((function(){p(this,e,!1)}))},stopCollapsing:function(e){return e.each((function(){clearTimeout(t(this).data("layout").collapseTimer)}))}},t.fn.layout.parseOptions=function(e){return t.extend({},t.parser.parseOptions(e,[{fit:"boolean"}]))},t.fn.layout.defaults={fit:!1,onExpand:function(t){},onCollapse:function(t){},onAdd:function(t){},onRemove:function(t){}},t.fn.layout.parsePanelOptions=function(e){t(e);return t.extend({},t.fn.panel.parseOptions(e),t.parser.parseOptions(e,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},t.fn.layout.paneldefaults=t.extend({},t.fn.panel.defaults,{region:null,split:!1,collapseDelay:100,collapsedSize:32,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(e){var n=t(this).panel("options");if("north"==n.region||"south"==n.region)return e;var a=[];return n.iconCls&&a.push('<div class="panel-icon '+n.iconCls+'"></div>'),a.push('<div class="panel-title layout-expand-title'),a.push(" layout-expand-title-"+n.titleDirection),a.push(n.iconCls?" layout-expand-with-icon":""),a.push('">'),a.push(e),a.push("</div>"),a.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery);