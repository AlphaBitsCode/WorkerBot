/* Copyright (C) 2023 by WorkerBot.AI */
(function($){function _1(e){e._remove()}function _3(e,n){var o=$.data(e,"panel"),a=o.options,t=o.panel,i=t.children(".panel-header"),l=t.children(".panel-body"),r=t.children(".panel-footer"),d="left"==a.halign||"right"==a.halign;n&&($.extend(a,{width:n.width,height:n.height,minWidth:n.minWidth,maxWidth:n.maxWidth,minHeight:n.minHeight,maxHeight:n.maxHeight,left:n.left,top:n.top}),a.hasResized=!1);var s=t.outerWidth(),h=t.outerHeight();t._size(a);var c=t.outerWidth(),p=t.outerHeight();if(!a.hasResized||s!=c||h!=p){if(a.hasResized=!0,d||i._outerWidth(t.width()),l._outerWidth(t.width()),isNaN(parseInt(a.height))){l.css("height","");var f=$.parser.parseValue("minHeight",a.minHeight,t.parent()),u=$.parser.parseValue("maxHeight",a.maxHeight,t.parent()),_=i._outerHeight()+r._outerHeight()+t._outerHeight()-t.height();l._size("minHeight",f?f-_:""),l._size("maxHeight",u?u-_:"")}else if(d){if(a.header)var m=$(a.header)._outerWidth();else{i.css("width","");m=i._outerWidth()}var b=i.find(".panel-title");m+=Math.min(b._outerWidth(),b._outerHeight());var g=t.height();i._outerWidth(m)._outerHeight(g),b._outerWidth(i.height()),l._outerWidth(t.width()-m-r._outerWidth())._outerHeight(g),r._outerHeight(g),l.css({left:"",right:""}),i.length&&l.css(a.halign,i.position()[a.halign]+m+"px"),a.panelCssWidth=t.css("width"),a.collapsed&&t._outerWidth(m+r._outerWidth())}else l._outerHeight(t.height()-i._outerHeight()-r._outerHeight());t.css({height:d?void 0:"",minHeight:"",maxHeight:"",left:a.left,top:a.top}),a.onResize.apply(e,[a.width,a.height]),$(e).panel("doLayout")}}function _15(e,n){var o=$.data(e,"panel"),a=o.options,t=o.panel;n&&(null!=n.left&&(a.left=n.left),null!=n.top&&(a.top=n.top)),t.css({left:a.left,top:a.top}),t.find(".tooltip-f").each((function(){$(this).tooltip("reposition")})),a.onMove.apply(e,[a.left,a.top])}function _1b(e){$(e).addClass("panel-body")._size("clear");var n=$('<div class="panel"></div>').insertBefore(e);return n[0].appendChild(e),n._bind("_resize",(function(n,o){return($(this).hasClass("easyui-fluid")||o)&&_3(e,{}),!1})),n}function _1f(_20){var _21=$.data(_20,"panel"),_22=_21.options,_23=_21.panel;_23.css(_22.style),_23.addClass(_22.cls),_23.removeClass("panel-hleft panel-hright").addClass("panel-h"+_22.halign),_24(),_25();var _26=$(_20).panel("header"),_27=$(_20).panel("body"),_28=$(_20).siblings(".panel-footer");function _24(){if(_22.noheader||!_22.title&&!_22.header)_1(_23.children(".panel-header")),_23.children(".panel-body").addClass("panel-body-noheader");else{if(_22.header)$(_22.header).addClass("panel-header").prependTo(_23);else{var _29=_23.children(".panel-header");_29.length||(_29=$('<div class="panel-header"></div>').prependTo(_23)),$.isArray(_22.tools)||_29.find("div.panel-tool .panel-tool-a").appendTo(_22.tools),_29.empty();var _2a=$('<div class="panel-title"></div>').html(_22.title).appendTo(_29);_22.iconCls&&(_2a.addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(_22.iconCls).appendTo(_29)),"left"!=_22.halign&&"right"!=_22.halign||_2a.addClass("panel-title-"+_22.titleDirection);var _2b=$('<div class="panel-tool"></div>').appendTo(_29);_2b._bind("click",(function(e){e.stopPropagation()})),_22.tools&&($.isArray(_22.tools)?$.map(_22.tools,(function(t){_2c(_2b,t.iconCls,eval(t.handler))})):$(_22.tools).children().each((function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(_2b)}))),_22.collapsible&&_2c(_2b,"panel-tool-collapse",(function(){1==_22.collapsed?_57(_20,!0):_43(_20,!0)})),_22.minimizable&&_2c(_2b,"panel-tool-min",(function(){_62(_20)})),_22.maximizable&&_2c(_2b,"panel-tool-max",(function(){1==_22.maximized?_66(_20):_42(_20)})),_22.closable&&_2c(_2b,"panel-tool-close",(function(){_44(_20)}))}_23.children("div.panel-body").removeClass("panel-body-noheader")}}function _2c(e,n,o){$('<a href="javascript:;"></a>').addClass(n).appendTo(e)._bind("click",o)}function _25(){_22.footer?($(_22.footer).addClass("panel-footer").appendTo(_23),$(_20).addClass("panel-body-nobottom")):(_23.children(".panel-footer").remove(),$(_20).removeClass("panel-body-nobottom"))}_22.border?(_26.removeClass("panel-header-noborder"),_27.removeClass("panel-body-noborder"),_28.removeClass("panel-footer-noborder")):(_26.addClass("panel-header-noborder"),_27.addClass("panel-body-noborder"),_28.addClass("panel-footer-noborder")),_26.addClass(_22.headerCls),_27.addClass(_22.bodyCls),$(_20).attr("id",_22.id||""),_22.content&&($(_20).panel("clear"),$(_20).html(_22.content),$.parser.parse($(_20)))}function _2f(e,n){var o=$.data(e,"panel"),a=o.options;if(t&&(a.queryParams=n),a.href&&(!o.isLoaded||!a.cache)){var t=$.extend({},a.queryParams);if(0==a.onBeforeLoad.call(e,t))return;o.isLoaded=!1,a.loadingMessage&&($(e).panel("clear"),$(e).html($('<div class="panel-loading"></div>').html(a.loadingMessage))),a.loader.call(e,t,(function(n){var t=a.extractor.call(e,n);$(e).panel("clear"),$(e).html(t),$.parser.parse($(e)),a.onLoad.apply(e,arguments),o.isLoaded=!0}),(function(){a.onLoadError.apply(e,arguments)}))}}function _37(e){var n=$(e);n.find(".combo-f").each((function(){$(this).combo("destroy")})),n.find(".m-btn").each((function(){$(this).menubutton("destroy")})),n.find(".s-btn").each((function(){$(this).splitbutton("destroy")})),n.find(".tooltip-f").each((function(){$(this).tooltip("destroy")})),n.children("div").each((function(){$(this)._size("unfit")})),n.empty()}function _39(e){$(e).panel("doLayout",!0)}function _3b(e,n){var o=$.data(e,"panel"),a=o.options,t=o.panel;if(1==n||0!=a.onBeforeOpen.call(e))if(t.stop(!0,!0),$.isFunction(a.openAnimation))a.openAnimation.call(e,i);else switch(a.openAnimation){case"slide":t.slideDown(a.openDuration,i);break;case"fade":t.fadeIn(a.openDuration,i);break;case"show":t.show(a.openDuration,i);break;default:t.show(),i()}function i(){a.closed=!1,a.minimized=!1,t.children(".panel-header").find("a.panel-tool-restore").length&&(a.maximized=!0),a.onOpen.call(e),1==a.maximized&&(a.maximized=!1,_42(e)),1==a.collapsed&&(a.collapsed=!1,_43(e)),a.collapsed||!a.href||o.isLoaded&&a.cache||(_2f(e),_39(e),a.doneLayout=!0),a.doneLayout||(a.doneLayout=!0,_39(e))}}function _44(e,n){var o=$.data(e,"panel"),a=o.options,t=o.panel;if(1==n||0!=a.onBeforeClose.call(e))if(t.find(".tooltip-f").each((function(){$(this).tooltip("hide")})),t.stop(!0,!0),t._size("unfit"),$.isFunction(a.closeAnimation))a.closeAnimation.call(e,i);else switch(a.closeAnimation){case"slide":t.slideUp(a.closeDuration,i);break;case"fade":t.fadeOut(a.closeDuration,i);break;case"hide":t.hide(a.closeDuration,i);break;default:t.hide(),i()}function i(){a.closed=!0,a.onClose.call(e)}}function _4a(e,n){var o=$.data(e,"panel"),a=o.options,t=o.panel;1!=n&&0==a.onBeforeDestroy.call(e)||($(e).panel("clear").panel("clear","footer"),_1(t),a.onDestroy.call(e))}function _43(e,n){var o=$.data(e,"panel").options,a=$.data(e,"panel").panel,t=a.children(".panel-body"),i=a.children(".panel-header"),l=i.find("a.panel-tool-collapse");function r(){t.hide(),o.collapsed=!0,o.onCollapse.call(e)}1!=o.collapsed&&(t.stop(!0,!0),0!=o.onBeforeCollapse.call(e)&&(l.addClass("panel-tool-expand"),1==n?"left"==o.halign||"right"==o.halign?a.animate({width:i._outerWidth()+a.children(".panel-footer")._outerWidth()},(function(){r()})):t.slideUp("normal",(function(){r()})):("left"!=o.halign&&"right"!=o.halign||a._outerWidth(i._outerWidth()+a.children(".panel-footer")._outerWidth()),r())))}function _57(e,n){var o=$.data(e,"panel").options,a=$.data(e,"panel").panel,t=a.children(".panel-body"),i=a.children(".panel-header").find("a.panel-tool-collapse");function l(){t.show(),o.collapsed=!1,o.onExpand.call(e),_2f(e),_39(e)}0!=o.collapsed&&(t.stop(!0,!0),0!=o.onBeforeExpand.call(e)&&(i.removeClass("panel-tool-expand"),1==n?"left"==o.halign||"right"==o.halign?(t.show(),a.animate({width:o.panelCssWidth},(function(){l()}))):t.slideDown("normal",(function(){l()})):("left"!=o.halign&&"right"!=o.halign||a.css("width",o.panelCssWidth),l())))}function _42(e){var n=$.data(e,"panel").options,o=$.data(e,"panel").panel.children(".panel-header").find("a.panel-tool-max");1!=n.maximized&&(o.addClass("panel-tool-restore"),$.data(e,"panel").original||($.data(e,"panel").original={width:n.width,height:n.height,left:n.left,top:n.top,fit:n.fit}),n.left=0,n.top=0,n.fit=!0,_3(e),n.minimized=!1,n.maximized=!0,n.onMaximize.call(e))}function _62(e){var n=$.data(e,"panel").options,o=$.data(e,"panel").panel;o._size("unfit"),o.hide(),n.minimized=!0,n.maximized=!1,n.onMinimize.call(e)}function _66(e){var n=$.data(e,"panel").options,o=$.data(e,"panel").panel,a=o.children(".panel-header").find("a.panel-tool-max");0!=n.maximized&&(o.show(),a.removeClass("panel-tool-restore"),$.extend(n,$.data(e,"panel").original),_3(e),n.minimized=!1,n.maximized=!1,$.data(e,"panel").original=null,n.onRestore.call(e))}function _6b(e,n){$.data(e,"panel").options.title=n,$(e).panel("header").find("div.panel-title").html(n)}$.fn._remove=function(){return this.each((function(){$(this).remove();try{this.outerHTML=""}catch(e){}}))};var _6e=null;$(window)._unbind(".panel")._bind("resize.panel",(function(){_6e&&clearTimeout(_6e),_6e=setTimeout((function(){var e=$("body.layout");e.length?(e.layout("resize"),$("body").children(".easyui-fluid:visible").each((function(){$(this).triggerHandler("_resize")}))):$("body").panel("doLayout"),_6e=null}),100)})),$.fn.panel=function(e,n){return"string"==typeof e?$.fn.panel.methods[e](this,n):(e=e||{},this.each((function(){var n,o=$.data(this,"panel");o?(n=$.extend(o.options,e),o.isLoaded=!1):(n=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),e),$(this).attr("title",""),o=$.data(this,"panel",{options:n,panel:_1b(this),isLoaded:!1})),_1f(this),$(this).show(),1==n.doSize&&(o.panel.css("display","block"),_3(this)),1==n.closed||1==n.minimized?o.panel.hide():_3b(this)})))},$.fn.panel.methods={options:function(e){return $.data(e[0],"panel").options},panel:function(e){return $.data(e[0],"panel").panel},header:function(e){return $.data(e[0],"panel").panel.children(".panel-header")},footer:function(e){return e.panel("panel").children(".panel-footer")},body:function(e){return $.data(e[0],"panel").panel.children(".panel-body")},setTitle:function(e,n){return e.each((function(){_6b(this,n)}))},open:function(e,n){return e.each((function(){_3b(this,n)}))},close:function(e,n){return e.each((function(){_44(this,n)}))},destroy:function(e,n){return e.each((function(){_4a(this,n)}))},clear:function(e,n){return e.each((function(){_37("footer"==n?$(this).panel("footer"):this)}))},refresh:function(e,n){return e.each((function(){var e=$.data(this,"panel");e.isLoaded=!1,n&&("string"==typeof n?e.options.href=n:e.options.queryParams=n),_2f(this)}))},resize:function(e,n){return e.each((function(){_3(this,n||{})}))},doLayout:function(e,n){return e.each((function(){function e(e,o){if(e){var a=e==$("body")[0];$(e).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,.easyui-fluid:visible").filter((function(n,t){var i=$(t).parents(".panel-"+o+":first");return a?0==i.length:i[0]==e})).each((function(){$(this).triggerHandler("_resize",[n||!1])}))}}e(this,"body"),e($(this).siblings(".panel-footer")[0],"footer")}))},move:function(e,n){return e.each((function(){_15(this,n)}))},maximize:function(e){return e.each((function(){_42(this)}))},minimize:function(e){return e.each((function(){_62(this)}))},restore:function(e){return e.each((function(){_66(this)}))},collapse:function(e,n){return e.each((function(){_43(this,n)}))},expand:function(e,n){return e.each((function(){_57(this,n)}))}},$.fn.panel.parseOptions=function(e){var n=$(e),o=n.children(".panel-header,header"),a=n.children(".panel-footer,footer");return $.extend({},$.parser.parseOptions(e,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href","method","header","footer","halign","titleDirection",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"},"openAnimation","closeAnimation",{openDuration:"number",closeDuration:"number"}]),{loadingMessage:null!=n.attr("loadingMessage")?n.attr("loadingMessage"):void 0,header:o.length?o.removeClass("panel-header"):void 0,footer:a.length?a.removeClass("panel-footer"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,halign:"top",titleDirection:"down",collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,openAnimation:!1,openDuration:400,closeAnimation:!1,closeDuration:400,tools:null,footer:null,header:null,queryParams:{},method:"get",href:null,loadingMessage:"Loading...",loader:function(e,n,o){var a=$(this).panel("options");if(!a.href)return!1;$.ajax({type:a.method,url:a.href,cache:!1,data:e,dataType:"html",success:function(e){n(e)},error:function(){o.apply(this,arguments)}})},extractor:function(e){var n=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e);return n?n[1]:e},onBeforeLoad:function(e){},onLoad:function(){},onLoadError:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(e,n){},onMove:function(e,n){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}})(jQuery);