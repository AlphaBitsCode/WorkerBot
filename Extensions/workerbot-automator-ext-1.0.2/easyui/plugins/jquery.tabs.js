/* Copyright (C) 2023 by WorkerBot.AI */
(function($){function _1(t){var e=0;return $(t).children().each((function(){e+=$(this).outerWidth(!0)})),e}function _2(t){var e=$.data(t,"tabs").options;if(e.showHeader){var s=$(t).children("div.tabs-header"),a=s.children("div.tabs-tool:not(.tabs-tool-hidden)"),i=s.children("div.tabs-scroller-left"),n=s.children("div.tabs-scroller-right"),o=s.children("div.tabs-wrap");if("left"==e.tabPosition||"right"==e.tabPosition){if(!a.length)return;a._outerWidth(s.width());var l={left:"left"==e.tabPosition?"auto":0,right:"left"==e.tabPosition?0:"auto",top:"top"==e.toolPosition?0:"auto",bottom:"top"==e.toolPosition?"auto":0},r={marginTop:"top"==e.toolPosition?a.outerHeight():0};return a.css(l),void o.css(r)}var d=s.outerHeight();e.plain&&(d-=d-s.height()),a._outerHeight(d);var h=_1(s.find("ul.tabs")),c=s.width()-a._outerWidth();h>c?(i.add(n).show()._outerHeight(d),"left"==e.toolPosition?(a.css({left:i.outerWidth(),right:""}),o.css({marginLeft:i.outerWidth()+a._outerWidth(),marginRight:n._outerWidth(),width:c-i.outerWidth()-n.outerWidth()})):(a.css({left:"",right:n.outerWidth()}),o.css({marginLeft:i.outerWidth(),marginRight:n.outerWidth()+a._outerWidth(),width:c-i.outerWidth()-n.outerWidth()}))):(i.add(n).hide(),"left"==e.toolPosition?(a.css({left:0,right:""}),o.css({marginLeft:a._outerWidth(),marginRight:0,width:c})):(a.css({left:"",right:0}),o.css({marginLeft:0,marginRight:a._outerWidth(),width:c})))}}function _f(_10){var _11=$.data(_10,"tabs").options,_12=$(_10).children("div.tabs-header");if(_11.tools)if("string"==typeof _11.tools)$(_11.tools).addClass("tabs-tool").appendTo(_12),$(_11.tools).show();else{_12.children("div.tabs-tool").remove();for(var _13=$('<div class="tabs-tool"><table cellspacing="0" cellpadding="0" style="height:100%"><tr></tr></table></div>').appendTo(_12),tr=_13.find("tr"),i=0;i<_11.tools.length;i++){var td=$("<td></td>").appendTo(tr),_14=$('<a href="javascript:;"></a>').appendTo(td);_14[0].onclick=eval(_11.tools[i].handler||function(){}),_14.linkbutton($.extend({},_11.tools[i],{plain:!0}))}}else _12.children("div.tabs-tool").remove()}function _15(t,e){var s=$.data(t,"tabs"),a=s.options,i=$(t);if(a.doSize){e&&$.extend(a,{width:e.width,height:e.height}),i._size(a);var n=i.children("div.tabs-header"),o=i.children("div.tabs-panels"),l=n.find("div.tabs-wrap"),r=l.find(".tabs");if(r.children("li").removeClass("tabs-first tabs-last"),r.children("li:first").addClass("tabs-first"),r.children("li:last").addClass("tabs-last"),"left"==a.tabPosition||"right"==a.tabPosition?(n._outerWidth(a.showHeader?a.headerWidth:0),o._outerWidth(i.width()-n.outerWidth()),n.add(o)._size("height",isNaN(parseInt(a.height))?"":i.height()),l._outerWidth(n.width()),r._outerWidth(l.width()).css("height","")):(n.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)").css("display",a.showHeader?"block":"none"),n._outerWidth(i.width()).css("height",""),a.showHeader?(n.css("background-color",""),l.css("height","")):(n.css("background-color","transparent"),n._outerHeight(0),l._outerHeight(0)),r._outerHeight(a.tabHeight).css("width",""),r._outerHeight(r.outerHeight()-r.height()-1+a.tabHeight).css("width",""),o._size("height",isNaN(parseInt(a.height))?"":i.height()-n.outerHeight()),o._size("width",i.width())),s.tabs.length){var d=r.outerWidth(!0)-r.width(),h=r.children("li:first"),c=h.outerWidth(!0)-h.width(),b=n.width()-n.children(".tabs-tool:not(.tabs-tool-hidden)")._outerWidth(),u=Math.floor((b-d-c*s.tabs.length)/s.tabs.length);if($.map(s.tabs,(function(t){p(t,a.justified&&$.inArray(a.tabPosition,["top","bottom"])>=0?u:void 0)})),a.justified&&$.inArray(a.tabPosition,["top","bottom"])>=0){var f=b-d-_1(r);p(s.tabs[s.tabs.length-1],u+f)}}_2(t)}function p(t,e){var s=t.panel("options"),i=s.tab.find(".tabs-inner");(e=e||parseInt(s.tabWidth||a.tabWidth||void 0))?i._outerWidth(e):i.css("width",""),i._outerHeight(a.tabHeight),i.css("lineHeight",i.height()+"px"),i.find(".easyui-fluid:visible").triggerHandler("_resize")}}function _23(t){var e=$.data(t,"tabs").options,s=_26(t);if(s){var a=$(t).children("div.tabs-panels"),i="auto"==e.width?"auto":a.width(),n="auto"==e.height?"auto":a.height();s.panel("resize",{width:i,height:n})}}function _2a(t){$.data(t,"tabs").tabs;var e=$(t).addClass("tabs-container"),s=$('<div class="tabs-panels"></div>').insertBefore(e);e.children("div").each((function(){s[0].appendChild(this)})),e[0].appendChild(s[0]),$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(t),e.children("div.tabs-panels").children("div").each((function(e){var s=$.extend({},$.parser.parseOptions(this),{disabled:!!$(this).attr("disabled")||void 0,selected:!!$(this).attr("selected")||void 0});_3e(t,s,$(this))})),e.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right")._bind("mouseenter",(function(){$(this).addClass("tabs-scroller-over")}))._bind("mouseleave",(function(){$(this).removeClass("tabs-scroller-over")})),e._bind("_resize",(function(e,s){return($(this).hasClass("easyui-fluid")||s)&&(_15(t),_23(t)),!1}))}function _30(t){var e=$.data(t,"tabs"),s=e.options;function a(t){var e=0;return t.parent().children("li").each((function(s){if(t[0]==this)return e=s,!1})),e}$(t).children("div.tabs-header")._unbind()._bind("click",(function(i){if($(i.target).hasClass("tabs-scroller-left"))$(t).tabs("scrollBy",-s.scrollIncrement);else{if(!$(i.target).hasClass("tabs-scroller-right")){var n=$(i.target).closest("li");if(n.hasClass("tabs-disabled"))return!1;if($(i.target).closest(".tabs-close").length)_5d(t,a(n));else if(n.length){var o=a(n),l=e.tabs[o].panel("options");l.collapsible?l.closed?_53(t,o):_7b(t,o):_53(t,o)}return!1}$(t).tabs("scrollBy",s.scrollIncrement)}}))._bind("contextmenu",(function(e){var i=$(e.target).closest("li");i.hasClass("tabs-disabled")||i.length&&s.onContextMenu.call(t,e,i.find("span.tabs-title").html(),a(i))}))}function _38(t){var e=$.data(t,"tabs").options,s=$(t).children("div.tabs-header"),a=$(t).children("div.tabs-panels");s.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right"),a.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right"),"top"==e.tabPosition?s.insertBefore(a):"bottom"==e.tabPosition?(s.insertAfter(a),s.addClass("tabs-header-bottom"),a.addClass("tabs-panels-top")):"left"==e.tabPosition?(s.addClass("tabs-header-left"),a.addClass("tabs-panels-right")):"right"==e.tabPosition&&(s.addClass("tabs-header-right"),a.addClass("tabs-panels-left")),1==e.plain?s.addClass("tabs-header-plain"):s.removeClass("tabs-header-plain"),s.removeClass("tabs-header-narrow").addClass(e.narrow?"tabs-header-narrow":"");var i=s.find(".tabs");i.removeClass("tabs-pill").addClass(e.pill?"tabs-pill":""),i.removeClass("tabs-narrow").addClass(e.narrow?"tabs-narrow":""),i.removeClass("tabs-justified").addClass(e.justified?"tabs-justified":""),1==e.border?(s.removeClass("tabs-header-noborder"),a.removeClass("tabs-panels-noborder")):(s.addClass("tabs-header-noborder"),a.addClass("tabs-panels-noborder")),e.doSize=!0}function _3e(t,e,s){e=e||{};var a=$.data(t,"tabs"),i=a.tabs;(null==e.index||e.index>i.length)&&(e.index=i.length),e.index<0&&(e.index=0);var n=$(t).children("div.tabs-header").find("ul.tabs"),o=$(t).children("div.tabs-panels"),l=$('<li><span class="tabs-inner"><span class="tabs-title"></span><span class="tabs-icon"></span></span></li>');s||(s=$("<div></div>")),e.index>=i.length?(l.appendTo(n),s.appendTo(o),i.push(s)):(l.insertBefore(n.children("li:eq("+e.index+")")),s.insertBefore(o.children("div.panel:eq("+e.index+")")),i.splice(e.index,0,s)),s.panel($.extend({},e,{tab:l,border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:e.icon?e.icon:void 0,onLoad:function(){e.onLoad&&e.onLoad.apply(this,arguments),a.options.onLoad.call(t,$(this))},onBeforeOpen:function(){if(e.onBeforeOpen&&0==e.onBeforeOpen.call(this))return!1;var s=$(t).tabs("getSelected");if(s){if(s[0]==this)return _23(t),!1;if($(t).tabs("unselect",_4d(t,s)),s=$(t).tabs("getSelected"))return!1}var a=$(this).panel("options");a.tab.addClass("tabs-selected");var i=$(t).find(">div.tabs-header>div.tabs-wrap"),n=a.tab.position().left,o=n+a.tab.outerWidth();if(n<0||o>i.width()){var l=n-(i.width()-a.tab.width())/2;$(t).tabs("scrollBy",l)}else $(t).tabs("scrollBy",0);var r=$(this).panel("panel");r.css("display","block"),_23(t),r.css("display","none")},onOpen:function(){e.onOpen&&e.onOpen.call(this);var s=$(this).panel("options"),i=_4d(t,this);a.selectHis.push(i),a.options.onSelect.call(t,s.title,i)},onBeforeClose:function(){if(e.onBeforeClose&&0==e.onBeforeClose.call(this))return!1;$(this).panel("options").tab.removeClass("tabs-selected")},onClose:function(){e.onClose&&e.onClose.call(this);var s=$(this).panel("options");a.options.onUnselect.call(t,s.title,_4d(t,this))}})),$(t).tabs("update",{tab:s,options:s.panel("options"),type:"header"})}function _4e(t,e){var s=$.data(t,"tabs").options;null==e.selected&&(e.selected=!0),_3e(t,e),s.onAdd.call(t,e.title,e.index),e.selected&&_53(t,e.index)}function _54(t,e){e.type=e.type||"all";$.data(t,"tabs").selectHis;var s=e.tab,a=s.panel("options");a.title;if($.extend(a,e.options,{iconCls:e.options.icon?e.options.icon:void 0}),"all"!=e.type&&"body"!=e.type||s.panel(),"all"==e.type||"header"==e.type){var i=a.tab;if(a.header)i.find(".tabs-inner").html($(a.header));else{var n=i.find("span.tabs-title"),o=i.find("span.tabs-icon");if(n.html(a.title),o.attr("class","tabs-icon"),i.find(".tabs-close").remove(),a.closable?(n.addClass("tabs-closable"),$('<span class="tabs-close"></span>').appendTo(i)):n.removeClass("tabs-closable"),a.iconCls?(n.addClass("tabs-with-icon"),o.addClass(a.iconCls)):n.removeClass("tabs-with-icon"),a.tools){if(!(l=i.find("span.tabs-p-tool")).length)var l=$('<span class="tabs-p-tool"></span>').insertAfter(i.find(".tabs-inner"));if($.isArray(a.tools)){l.empty();for(var r=0;r<a.tools.length;r++){var d=$('<a href="javascript:;"></a>').appendTo(l);d.addClass(a.tools[r].iconCls),a.tools[r].handler&&d._bind("click",{handler:a.tools[r].handler},(function(t){$(this).parents("li").hasClass("tabs-disabled")||t.data.handler.call(this)}))}}else $(a.tools).children().appendTo(l);var h=12*l.children().length;a.closable?(h+=8,l.css("right","")):(h-=3,l.css("right","5px")),n.css("padding-right",h+"px")}else i.find("span.tabs-p-tool").remove(),n.css("padding-right","")}}a.disabled?a.tab.addClass("tabs-disabled"):a.tab.removeClass("tabs-disabled"),_15(t),$.data(t,"tabs").options.onUpdate.call(t,a.title,_4d(t,s))}function _5d(t,e){var s=$.data(t,"tabs"),a=s.options,i=(s.tabs,s.selectHis);if(_64(t,e)){var n=(l=_65(t,e)).panel("options").title,o=_4d(t,l);if(0!=a.onBeforeClose.call(t,n,o)){var l;(l=_65(t,e,!0)).panel("options").tab.remove(),l.panel("destroy"),a.onClose.call(t,n,o),_15(t);for(var r=[],d=0;d<i.length;d++){var h=i[d];h!=o&&r.push(h>o?h-1:h)}s.selectHis=r,!$(t).tabs("getSelected")&&r.length&&(o=s.selectHis.pop(),$(t).tabs("select",o))}}}function _65(t,e,s){var a=$.data(t,"tabs").tabs,i=null;if("number"==typeof e)e>=0&&e<a.length&&(i=a[e],s&&a.splice(e,1));else{for(var n=$("<span></span>"),o=0;o<a.length;o++){var l=a[o];n.html(l.panel("options").title);var r=n.text();if(n.html(e),r==(e=n.text())){i=l,s&&a.splice(o,1);break}}n.remove()}return i}function _4d(t,e){for(var s=$.data(t,"tabs").tabs,a=0;a<s.length;a++)if(s[a][0]==$(e)[0])return a;return-1}function _26(t){for(var e=$.data(t,"tabs").tabs,s=0;s<e.length;s++){var a=e[s];if(a.panel("options").tab.hasClass("tabs-selected"))return a}return null}function _73(t){for(var e=$.data(t,"tabs"),s=e.tabs,a=0;a<s.length;a++){var i=s[a].panel("options");if(i.selected&&!i.disabled)return void _53(t,a)}_53(t,e.options.selected)}function _53(t,e){var s=_65(t,e);s&&!s.is(":visible")&&(_7a(t),s.panel("options").disabled||s.panel("open"))}function _7b(t,e){var s=_65(t,e);s&&s.is(":visible")&&(_7a(t),s.panel("close"))}function _7a(t){$(t).children("div.tabs-panels").each((function(){$(this).stop(!0,!0)}))}function _64(t,e){return null!=_65(t,e)}function _81(t,e){$.data(t,"tabs").options.showHeader=e,$(t).tabs("resize")}function _85(t,e){var s=$(t).find(">.tabs-header>.tabs-tool");e?s.removeClass("tabs-tool-hidden").show():s.addClass("tabs-tool-hidden").hide(),$(t).tabs("resize").tabs("scrollBy",0)}$.fn.tabs=function(t,e){return"string"==typeof t?$.fn.tabs.methods[t](this,e):(t=t||{},this.each((function(){var e=$.data(this,"tabs");e?$.extend(e.options,t):($.data(this,"tabs",{options:$.extend({},$.fn.tabs.defaults,$.fn.tabs.parseOptions(this),t),tabs:[],selectHis:[]}),_2a(this)),_f(this),_38(this),_15(this),_30(this),_73(this)})))},$.fn.tabs.methods={options:function(t){var e=t[0],s=$.data(e,"tabs").options,a=_26(e);return s.selected=a?_4d(e,a):-1,s},tabs:function(t){return $.data(t[0],"tabs").tabs},resize:function(t,e){return t.each((function(){_15(this,e),_23(this)}))},add:function(t,e){return t.each((function(){_4e(this,e)}))},close:function(t,e){return t.each((function(){_5d(this,e)}))},getTab:function(t,e){return _65(t[0],e)},getTabIndex:function(t,e){return _4d(t[0],e)},getSelected:function(t){return _26(t[0])},select:function(t,e){return t.each((function(){_53(this,e)}))},unselect:function(t,e){return t.each((function(){_7b(this,e)}))},exists:function(t,e){return _64(t[0],e)},update:function(t,e){return t.each((function(){_54(this,e)}))},enableTab:function(t,e){return t.each((function(){var t=$(this).tabs("getTab",e).panel("options");t.tab.removeClass("tabs-disabled"),t.disabled=!1}))},disableTab:function(t,e){return t.each((function(){var t=$(this).tabs("getTab",e).panel("options");t.tab.addClass("tabs-disabled"),t.disabled=!0}))},showHeader:function(t){return t.each((function(){_81(this,!0)}))},hideHeader:function(t){return t.each((function(){_81(this,!1)}))},showTool:function(t){return t.each((function(){_85(this,!0)}))},hideTool:function(t){return t.each((function(){_85(this,!1)}))},scrollBy:function(t,e){return t.each((function(){var t,s,a=$(this).tabs("options"),i=$(this).find(">div.tabs-header>div.tabs-wrap"),n=Math.min(i._scrollLeft()+e,(t=0,(s=i.children("ul")).children("li").each((function(){t+=$(this).outerWidth(!0)})),t-i.width()+(s.outerWidth()-s.width())));i.animate({scrollLeft:n},a.scrollDuration)}))}},$.fn.tabs.parseOptions=function(t){return $.extend({},$.parser.parseOptions(t,["tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean"},{headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number"},{showHeader:"boolean",justified:"boolean",narrow:"boolean",pill:"boolean"}]))},$.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:32,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,justified:!1,narrow:!1,pill:!1,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(t){},onSelect:function(t,e){},onUnselect:function(t,e){},onBeforeClose:function(t,e){},onClose:function(t,e){},onAdd:function(t,e){},onUpdate:function(t,e){},onContextMenu:function(t,e,s){}}})(jQuery);