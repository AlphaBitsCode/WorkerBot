/* Copyright (C) 2023 by WorkerBot.AI */
(function($){var _1=0;function _2(t,e){return $.easyui.indexOfArray(t,e)}function _3(t,e,a){$.easyui.removeArrayItem(t,e,a)}function _4(t,e,a){$.easyui.addArrayItem(t,e,a)}function _5(t,e){return $.data(t,"treegrid")?e.slice(1):e}function _7(t){var e=$.data(t,"datagrid"),a=e.options,i=e.panel,r=e.dc,d=null;a.sharedStyleSheet?d="boolean"==typeof a.sharedStyleSheet?"head":a.sharedStyleSheet:(d=i.closest("div.datagrid-view")).length||(d=r.view);var n=$(d),o=$.data(n[0],"ss");return o||(o=$.data(n[0],"ss",{cache:{},dirty:[]})),{add:function(t){for(var e=['<style type="text/css" easyui="true">'],a=0;a<t.length;a++)o.cache[t[a][0]]={width:t[a][1]};var i=0;for(var r in o.cache){var d=o.cache[r];d.index=i++,e.push(r+"{width:"+d.width+"}")}e.push("</style>"),$(e.join("\n")).appendTo(n),n.children("style[easyui]:not(:last)").remove()},getRule:function(t){var e=n.children("style[easyui]:last")[0],a=e.styleSheet?e.styleSheet:e.sheet||document.styleSheets[document.styleSheets.length-1];return(a.cssRules||a.rules)[t]},set:function(t,e){var a=o.cache[t];if(a){a.width=e;var i=this.getRule(a.index);i&&(i.style.width=e)}},remove:function(t){var e=[];for(var a in o.cache)-1==a.indexOf(t)&&e.push([a,o.cache[a].width]);o.cache={},this.add(e)},dirty:function(t){t&&o.dirty.push(t)},clean:function(){for(var t=0;t<o.dirty.length;t++)this.remove(o.dirty[t]);o.dirty=[]}}}function _1a(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.panel;if(e&&$.extend(i,e),1==i.fit){var d=r.panel("panel").parent();i.width=d.width(),i.height=d.height()}r.panel("resize",i)}function _20(t){var e=$.data(t,"datagrid"),a=e.options,i=e.dc,r=e.panel;if(r.is(":visible")){var d=r.width(),n=r.height(),o=i.view,l=i.view1,s=i.view2,c=l.children("div.datagrid-header"),h=s.children("div.datagrid-header"),g=c.find("table"),f=h.find("table");o.width(d);var u=c.children("div.datagrid-header-inner").show();l.width(u.find("table").width()),a.showHeader||u.hide(),s.width(d-l._outerWidth()),l.children()._outerWidth(l.width()),s.children()._outerWidth(s.width());var p=c.add(h).add(g).add(f);p.css("height","");var v=Math.max(g.height(),f.height());p._outerHeight(v),o.children(".datagrid-empty").css("top",v+"px"),i.body1.add(i.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:i.header2._outerHeight()});var _=i.body2.children("table.datagrid-btable-frozen")._outerHeight(),w=_+h._outerHeight()+s.children(".datagrid-footer")._outerHeight();r.children(":not(.datagrid-view,.datagrid-mask,.datagrid-mask-msg)").each((function(){w+=$(this)._outerHeight()}));var b=r.outerHeight()-r.height(),m=r._size("minHeight")||"",y=r._size("maxHeight")||"";l.add(s).children("div.datagrid-body").css({marginTop:_,height:isNaN(parseInt(a.height))?"":n-w,minHeight:m?m-b-w:"",maxHeight:y?y-b-w:""}),o.height(s.height())}}function _34(t,e,a){$.data(t,"datagrid").data.rows;var i,r,d=$.data(t,"datagrid").options,n=$.data(t,"datagrid").dc,o=$('<tr class="datagrid-row" style="position:absolute;left:-999999px"></tr>').appendTo("body"),l=o.outerHeight();(o.remove(),n.body1.is(":empty")||d.nowrap&&!d.autoRowHeight&&!a)||(null!=e?f(d.finder.getTr(t,e,"body",1),d.finder.getTr(t,e,"body",2)):(f(d.finder.getTr(t,0,"allbody",1),d.finder.getTr(t,0,"allbody",2)),d.showFooter&&f(d.finder.getTr(t,0,"allfooter",1),d.finder.getTr(t,0,"allfooter",2))));if(_20(t),"auto"==d.height){var s=n.body1.parent(),c=n.body2,h=(i=0,r=0,$(c).children().each((function(){var t=$(this);t.is(":visible")&&(r+=t._outerHeight(),i<t._outerWidth()&&(i=t._outerWidth()))})),{width:i,height:r}),g=h.height;h.width>c.width()&&(g+=18),g-=parseInt(c.css("marginTop"))||0,s.height(g),c.height(g),n.view.height(n.view2.height())}function f(t,e){for(var a=0;a<e.length;a++){var i=$(t[a]),r=$(e[a]);i.css("height",""),r.css("height","");var d=Math.max(i.outerHeight(),r.outerHeight());d!=l&&(d=Math.max(d,l)+1,i.css("height",d),r.css("height",d))}}n.body2.triggerHandler("scroll")}function _46(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.dc;function d(a){var d=a?1:2,n=i.finder.getTr(t,e,"body",d);(a?r.body1:r.body2).children("table.datagrid-btable-frozen").append(n)}r.body2.children("table.datagrid-btable-frozen").length||r.body1.add(r.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),d(!0),d(!1),_20(t)}function _4e(_4f,_50){function _51(){var _52=[],_53=[];return $(_4f).children("thead").each((function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each((function(){var _54=[];$(this).find("th").each((function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["id","field","align","halign","order","width",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number"}]),{title:th.html()||void 0,hidden:!!th.attr("hidden")||void 0,hformatter:th.attr("hformatter")?eval(th.attr("hformatter")):void 0,hstyler:th.attr("hstyler")?eval(th.attr("hstyler")):void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0});if(col.width&&-1==String(col.width).indexOf("%")&&(col.width=parseInt(col.width)),th.attr("editor")){var s=$.trim(th.attr("editor"));"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s}_54.push(col)})),opt.frozen?_52.push(_54):_53.push(_54)}))})),[_52,_53]}var _55=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(_4f);_55.panel({doSize:!1,cls:"datagrid"}),$(_4f).addClass("datagrid-f").hide().appendTo(_55.children("div.datagrid-view"));var cc=_51(),_56=_55.children("div.datagrid-view"),_57=_56.children("div.datagrid-view1"),_58=_56.children("div.datagrid-view2");return{panel:_55,frozenColumns:cc[0],columns:cc[1],dc:{view:_56,view1:_57,view2:_58,header1:_57.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:_58.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:_57.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:_58.children("div.datagrid-body"),footer1:_57.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:_58.children("div.datagrid-footer").children("div.datagrid-footer-inner")}}}function _59(_5a){var _5b=$.data(_5a,"datagrid"),_5c=_5b.options,dc=_5b.dc,_5d=_5b.panel;_5b.ss=$(_5a).datagrid("createStyleSheet"),_5d.panel($.extend({},_5c,{id:null,doSize:!1,onResize:function(t,e){$.data(_5a,"datagrid")&&(_20(_5a),$(_5a).datagrid("fitColumns"),_5c.onResize.call(_5d,t,e))},onExpand:function(){$.data(_5a,"datagrid")&&($(_5a).datagrid("fixRowHeight").datagrid("fitColumns"),_5c.onExpand.call(_5d))}}));var _60=$(_5a).attr("id")||"";if(_60&&(_60+="_"),_5b.rowIdPrefix=_60+"datagrid-row-r"+ ++_1,_5b.cellClassPrefix=_60+"datagrid-cell-c"+_1,_61(dc.header1,_5c.frozenColumns,!0),_61(dc.header2,_5c.columns,!1),_62(),dc.header1.add(dc.header2).css("display",_5c.showHeader?"block":"none"),dc.footer1.add(dc.footer2).css("display",_5c.showFooter?"block":"none"),_5c.toolbar)if($.isArray(_5c.toolbar)){$("div.datagrid-toolbar",_5d).remove();for(var tb=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_5d),tr=tb.find("tr"),i=0;i<_5c.toolbar.length;i++){var btn=_5c.toolbar[i];if("-"==btn)$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),_63=$('<a href="javascript:;"></a>').appendTo(td);_63[0].onclick=eval(btn.handler||function(){}),_63.linkbutton($.extend({},btn,{plain:!0}))}}}else $(_5c.toolbar).addClass("datagrid-toolbar").prependTo(_5d),$(_5c.toolbar).show();else $("div.datagrid-toolbar",_5d).remove();if($("div.datagrid-pager",_5d).remove(),_5c.pagination){var _64=$('<div class="datagrid-pager"></div>');if("bottom"==_5c.pagePosition)_64.appendTo(_5d);else if("top"==_5c.pagePosition)_64.addClass("datagrid-pager-top").prependTo(_5d);else{var _65=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(_5d);_64.appendTo(_5d),_64=_64.add(_65)}_64.pagination({total:0,pageNumber:_5c.pageNumber,pageSize:_5c.pageSize,pageList:_5c.pageList,onSelectPage:function(t,e){_5c.pageNumber=t||1,_5c.pageSize=e,_64.pagination("refresh",{pageNumber:t,pageSize:e}),_c3(_5a)}}),_5c.pageSize=_64.pagination("options").pageSize}function _61(t,e,a){if(e){$(t).show(),$(t).empty();var i=$('<div class="datagrid-cell" style="position:absolute;left:-99999px"></div>').appendTo("body");i._outerWidth(99);var r=100-parseInt(i[0].style.width);i.remove();var d=[],n=[],o=[];_5c.sortName&&(d=_5c.sortName.split(","),n=_5c.sortOrder.split(","));for(var l=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(t),s=0;s<e.length;s++)for(var c=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",l)),h=e[s],g=0;g<h.length;g++){var f=h[g],u="";f.rowspan&&(u+='rowspan="'+f.rowspan+'" '),f.colspan&&(u+='colspan="'+f.colspan+'" ',f.id||(f.id=["datagrid-td-group"+_1,s,g].join("-"))),f.id&&(u+='id="'+f.id+'"');var p=f.hstyler?f.hstyler(f.title,f):"";if("string"==typeof p)var v=p,_="";else v=(p=p||{}).style||"",_=p.class||"";var w=$("<td "+u+' class="'+_+'" style="'+v+'"></td>').appendTo(c);if(f.checkbox)w.attr("field",f.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox">').appendTo(w);else if(f.field){w.attr("field",f.field),w.append('<div class="datagrid-cell"><span></span><span class="datagrid-sort-icon"></span></div>'),w.find("span:first").html(f.hformatter?f.hformatter(f.title,f):f.title);var b=w.find("div.datagrid-cell"),m=_2(d,f.field);if(m>=0&&b.addClass("datagrid-sort-"+n[m]),f.sortable&&b.addClass("datagrid-sort"),0==f.resizable&&b.attr("resizable","false"),f.width){var y=$.parser.parseValue("width",f.width,dc.view,_5c.scrollbarSize+(_5c.rownumbers?_5c.rownumberWidth:0));f.deltaWidth=r,f.boxWidth=y-r}else f.auto=!0;b.css("text-align",f.halign||f.align||""),f.cellClass=_5b.cellClassPrefix+"-"+f.field.replace(/[\.|\s]/g,"-"),b.addClass(f.cellClass)}else $('<div class="datagrid-cell-group"></div>').html(f.hformatter?f.hformatter(f.title,f):f.title).appendTo(w);f.hidden&&(w.hide(),o.push(f.field))}if(a&&_5c.rownumbers){w=$('<td rowspan="'+_5c.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>');0==$("tr",l).length?w.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",l)):w.prependTo($("tr:first",l))}for(s=0;s<o.length;s++)_c5(_5a,o[s],-1)}}function _62(){for(var t=[[".datagrid-header-rownumber",_5c.rownumberWidth-1+"px"],[".datagrid-cell-rownumber",_5c.rownumberWidth-1+"px"]],e=_77(_5a,!0).concat(_77(_5a)),a=0;a<e.length;a++){var i=_78(_5a,e[a]);i&&!i.checkbox&&t.push(["."+i.cellClass,i.boxWidth?i.boxWidth+"px":"auto"])}_5b.ss.add(t),_5b.ss.dirty(_5b.cellSelectorPrefix),_5b.cellSelectorPrefix="."+_5b.cellClassPrefix}}function _79(t){var e=$.data(t,"datagrid"),a=e.panel,i=e.options,r=e.dc,d=r.header1.add(r.header2);for(var n in d._unbind(".datagrid"),i.headerEvents)d._bind(n+".datagrid",i.headerEvents[n]);var o=d.find("div.datagrid-cell"),l="right"==i.resizeHandle?"e":"left"==i.resizeHandle?"w":"e,w";o.each((function(){$(this).resizable({handles:l,edge:i.resizeEdge,disabled:!!$(this).attr("resizable")&&"false"==$(this).attr("resizable"),minWidth:25,onStartResize:function(t){e.resizing=!0,d.css("cursor",$("body").css("cursor")),e.proxy||(e.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(r.view)),"e"==t.data.dir?t.data.deltaEdge=$(this)._outerWidth()-(t.pageX-$(this).offset().left):t.data.deltaEdge=$(this).offset().left-t.pageX-1,e.proxy.css({left:t.pageX-$(a).offset().left-1+t.data.deltaEdge,display:"none"}),setTimeout((function(){e.proxy&&e.proxy.show()}),500)},onResize:function(t){return e.proxy.css({left:t.pageX-$(a).offset().left-1+t.data.deltaEdge,display:"block"}),!1},onStopResize:function(a){d.css("cursor",""),$(this).css("height","");var r=$(this).parent().attr("field"),n=_78(t,r);n.width=$(this)._outerWidth()+1,n.boxWidth=n.width-n.deltaWidth,n.auto=void 0,$(this).css("width",""),$(t).datagrid("fixColumnSize",r),e.proxy.remove(),e.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&_20(t),$(t).datagrid("fitColumns"),i.onResizeColumn.call(t,r,n.width),setTimeout((function(){e.resizing=!1}),0)}})}));var s=r.body1.add(r.body2);for(var n in s._unbind(),i.rowEvents)s._bind(n,i.rowEvents[n]);r.body1._bind("mousewheel DOMMouseScroll MozMousePixelScroll",(function(t){t.preventDefault();var e=t.originalEvent||window.event,a=e.wheelDelta||-1*e.detail;"deltaY"in e&&(a=-1*e.deltaY);var i=$(t.target).closest("div.datagrid-view").children(".datagrid-f").data("datagrid").dc;i.body2.scrollTop(i.body2.scrollTop()-a)})),r.body2._bind("scroll",(function(){var t=r.view1.children("div.datagrid-body"),e=$(this).scrollTop();$(this).scrollTop(e),t.scrollTop(e);var a=r.body1.children(":first"),i=r.body2.children(":first");if(a.length&&i.length){var d=a.offset().top,n=i.offset().top;d!=n&&t.scrollTop(t.scrollTop()+d-n)}r.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),r.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())}))}function _86(t){return function(e){var a=$(e.target).closest("td[field]");if(a.length){var i=_89(a);!$(i).data("datagrid").resizing&&t?a.addClass("datagrid-header-over"):a.removeClass("datagrid-header-over")}}}function _8a(t){var e=_89(t.target),a=$(e).datagrid("options"),i=$(t.target).closest("input[type=checkbox]");if(i.length){if(a.singleSelect&&a.selectOnCheck)return!1;i.is(":checked")?_8d(e):_8e(e),t.stopPropagation()}else{var r=$(t.target).closest(".datagrid-cell");if(r.length){var d=r.offset().left+5,n=r.offset().left+r._outerWidth()-5;t.pageX<n&&t.pageX>d&&_90(e,r.parent().attr("field"))}}}function _91(t){var e=_89(t.target),a=$(e).datagrid("options"),i=$(t.target).closest(".datagrid-cell");if(i.length){var r=i.offset().left+5,d=i.offset().left+i._outerWidth()-5;if("right"==a.resizeHandle?t.pageX>d:"left"==a.resizeHandle?t.pageX<r:t.pageX<r||t.pageX>d){var n=i.parent().attr("field"),o=_78(e,n);if(0==o.resizable)return;$(e).datagrid("autoSizeColumn",n),o.auto=!1}}}function _97(t){var e=_89(t.target),a=$(e).datagrid("options"),i=$(t.target).closest("td[field]");a.onHeaderContextMenu.call(e,t,i.attr("field"))}function _9a(t){return function(e){var a=_9c(e.target);if(a){var i=_89(a);if(!$.data(i,"datagrid").resizing){var r=_9f(a);if(t)_a0(i,r);else $.data(i,"datagrid").options.finder.getTr(i,r).removeClass("datagrid-row-over")}}}}function _a2(t){var e=_9c(t.target);if(e){var a=_89(e),i=$.data(a,"datagrid").options,r=_9f(e),d=$(t.target);if(d.parent().hasClass("datagrid-cell-check"))i.singleSelect&&i.selectOnCheck?(d._propAttr("checked",!d.is(":checked")),_a6(a,r)):d.is(":checked")?(d._propAttr("checked",!1),_a6(a,r)):(d._propAttr("checked",!0),_a7(a,r));else{var n=i.finder.getRow(a,r),o=d.closest("td[field]",e);if(o.length){var l=o.attr("field");i.onClickCell.call(a,r,l,n[l])}if(1==i.singleSelect)_a9(a,r);else if(i.ctrlSelect)if(t.metaKey||t.ctrlKey)e.hasClass("datagrid-row-selected")?_aa(a,r):_a9(a,r);else if(t.shiftKey){$(a).datagrid("clearSelections");for(var s=Math.min(i.lastSelectedIndex||0,r),c=Math.max(i.lastSelectedIndex||0,r),h=s;h<=c;h++)_a9(a,h)}else $(a).datagrid("clearSelections"),_a9(a,r),i.lastSelectedIndex=r;else e.hasClass("datagrid-row-selected")?_aa(a,r):_a9(a,r);i.onClickRow.apply(a,_5(a,[r,n]))}}}function _ad(t){var e=_9c(t.target);if(e){var a=_89(e),i=$.data(a,"datagrid").options,r=_9f(e),d=i.finder.getRow(a,r),n=$(t.target).closest("td[field]",e);if(n.length){var o=n.attr("field");i.onDblClickCell.call(a,r,o,d[o])}i.onDblClickRow.apply(a,_5(a,[r,d]))}}function _b2(t){var e=_9c(t.target);if(e){var a=_89(e),i=$.data(a,"datagrid").options,r=_9f(e),d=i.finder.getRow(a,r);i.onRowContextMenu.call(a,t,r,d)}else{var n=_9c(t.target,".datagrid-body");if(n){a=_89(n);(i=$.data(a,"datagrid").options).onRowContextMenu.call(a,t,-1,null)}}}function _89(t){return $(t).closest("div.datagrid-view").children(".datagrid-f")[0]}function _9c(t,e){var a=$(t).closest(e||"tr.datagrid-row");return a.length&&a.parent().length?a:void 0}function _9f(t){return t.attr("datagrid-row-index")?parseInt(t.attr("datagrid-row-index")):t.attr("node-id")}function _90(t,e){var a=$.data(t,"datagrid"),i=a.options;e=e||{};var r={sortName:i.sortName,sortOrder:i.sortOrder};"object"==typeof e&&$.extend(r,e);var d=[],n=[];if(r.sortName&&(d=r.sortName.split(","),n=r.sortOrder.split(",")),"string"==typeof e){var o=e;if(!(u=_78(t,o)).sortable||a.resizing)return;var l=u.order||"asc",s=_2(d,o);if(s>=0){var c="asc"==n[s]?"desc":"asc";i.multiSort&&c==l?(d.splice(s,1),n.splice(s,1)):n[s]=c}else i.multiSort?(d.push(o),n.push(l)):(d=[o],n=[l]);r.sortName=d.join(","),r.sortOrder=n.join(",")}if(0!=i.onBeforeSortColumn.call(t,r.sortName,r.sortOrder)){$.extend(i,r);var h=a.dc,g=h.header1.add(h.header2);g.find("div.datagrid-cell").removeClass("datagrid-sort-asc datagrid-sort-desc");for(var f=0;f<d.length;f++){var u=_78(t,d[f]);g.find("div."+u.cellClass).addClass("datagrid-sort-"+n[f])}i.remoteSort?_c3(t):_c4(t,$(t).datagrid("getData")),i.onSortColumn.call(t,i.sortName,i.sortOrder)}}function _c5(t,e,a){function i(i){var r=_cb(t,i);if(r.length){var d=_2(r[r.length-1],e);if(d>=0)for(var n=0;n<r.length-1;n++){var o=$("#"+r[n][d]),l=parseInt(o.attr("colspan")||1)+(a||0);o.attr("colspan",l),l?o.show():o.hide()}}}i(!0),i(!1)}function _d0(t){var e,a,i=$.data(t,"datagrid"),r=i.options,d=i.dc,n=d.view2.children("div.datagrid-header"),o=n.children("div.datagrid-header-inner");function l(e){var a=d.header1.add(d.header2).find(".datagrid-cell-group");a.length&&(a.each((function(){$(this)._outerWidth(e?$(this).parent().width():10)})),e&&_20(t))}function s(t){return!(String(t.width||"").indexOf("%")>=0)&&(!(t.hidden||t.checkbox||t.auto||t.fixed)||void 0)}d.body2.css("overflow-x",""),l(),e=!1,a=_77(t,!0).concat(_77(t,!1)),$.map(a,(function(a){var i=_78(t,a);if(String(i.width||"").indexOf("%")>=0){var n=$.parser.parseValue("width",i.width,d.view,r.scrollbarSize+(r.rownumbers?r.rownumberWidth:0))-i.deltaWidth;n>0&&(i.boxWidth=n,e=!0)}})),e&&$(t).datagrid("fixColumnSize"),function(){if(!r.fitColumns)return;i.leftWidth||(i.leftWidth=0);for(var e=0,a=[],d=_77(t,!1),l=0;l<d.length;l++){var c=_78(t,d[l]);s(c)&&(e+=c.width,a.push({field:c.field,col:c,addingWidth:0}))}if(!e)return;a[a.length-1].addingWidth-=i.leftWidth,o.show();var h=n.width()-n.find("table").width()-r.scrollbarSize+i.leftWidth,g=h/e;r.showHeader||o.hide();for(l=0;l<a.length;l++){var f=a[l],u=parseInt(f.col.width*g);f.addingWidth+=u,h-=u}a[a.length-1].addingWidth+=h;for(l=0;l<a.length;l++){(f=a[l]).col.boxWidth+f.addingWidth>0&&(f.col.boxWidth+=f.addingWidth,f.col.width+=f.addingWidth)}i.leftWidth=h,$(t).datagrid("fixColumnSize")}(),l(!0),o.show(),n.width()>=n.find("table").width()&&d.body2.css("overflow-x","hidden"),r.showHeader||o.hide()}function _e4(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.dc,d=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(e)s(e),$(t).datagrid("fitColumns");else{for(var n=!1,o=_77(t,!0).concat(_77(t,!1)),l=0;l<o.length;l++){e=o[l];_78(t,e).auto&&(s(e),n=!0)}n&&$(t).datagrid("fitColumns")}function s(e){var a=r.view.find('div.datagrid-header td[field="'+e+'"] div.datagrid-cell');a.css("width","");var n=$(t).datagrid("getColumnOption",e);n.width=void 0,n.boxWidth=void 0,n.auto=!0,$(t).datagrid("fixColumnSize",e);var o=Math.max(l("header"),l("allbody"),l("allfooter"))+1;function l(r){var n=0;return"header"==r?n=o(a):i.finder.getTr(t,0,r).find('td[field="'+e+'"] div.datagrid-cell').each((function(){var t=o($(this));n<t&&(n=t)})),n;function o(t){return t.is(":visible")?t._outerWidth():d.html(t.html())._outerWidth()}}a._outerWidth(o-1),n.width=o,n.boxWidth=parseInt(a[0].style.width),n.deltaWidth=o-n.boxWidth,a.css("width",""),$(t).datagrid("fixColumnSize",e),i.onResizeColumn.call(t,e,n.width)}d.remove()}function _f3(t,e){var a=$.data(t,"datagrid"),i=(a.options,a.dc.view.find("table.datagrid-btable,table.datagrid-ftable"));if(i.css("table-layout","fixed"),e)n(e);else for(var r=_77(t,!0).concat(_77(t,!1)),d=0;d<r.length;d++)n(r[d]);function n(e){var i=_78(t,e);i.cellClass&&a.ss.set("."+i.cellClass,i.boxWidth?i.boxWidth+"px":"auto")}i.css("table-layout",""),_f9(t),_34(t),_fa(t)}function _f9(t,e){var a=$.data(t,"datagrid").dc;(e=e||a.view.find("td.datagrid-td-merged")).each((function(){var e=$(this),a=e.attr("colspan")||1;if(a>1){for(var i=_78(t,e.attr("field")),r=i.boxWidth+i.deltaWidth-1,d=1;d<a;d++)e=e.next(),r+=(i=_78(t,e.attr("field"))).boxWidth+i.deltaWidth;$(this).children("div.datagrid-cell")._outerWidth(r)}}))}function _fa(t){$.data(t,"datagrid").dc.view.find("div.datagrid-editable").each((function(){var e=$(this),a=e.parent().attr("field"),i=$(t).datagrid("getColumnOption",a);e._outerWidth(i.boxWidth+i.deltaWidth-1);var r=$.data(this,"datagrid.editor");r.actions.resize&&r.actions.resize(r.target,e.width())}))}function _78(t,e){function a(t){if(t)for(var a=0;a<t.length;a++)for(var i=t[a],r=0;r<i.length;r++){var d=i[r];if(d.field==e)return d}return null}var i=$.data(t,"datagrid").options,r=a(i.columns);return r||(r=a(i.frozenColumns)),r}function _cb(t,e){for(var a,i=$.data(t,"datagrid").options,r=e?i.frozenColumns:i.columns,d=[],n=(a=0,$.map(r[0]||[],(function(t){a+=t.colspan||1})),a),o=0;o<r.length;o++)d[o]=new Array(n);for(var l=0;l<r.length;l++)$.map(r[l],(function(t){var e=s(d[l]);if(e>=0)for(var a=t.field||t.id||"",i=0;i<(t.colspan||1);i++){for(var r=0;r<(t.rowspan||1);r++)d[l+r][e]=a;e++}}));return d;function s(t){for(var e=0;e<t.length;e++)if(null==t[e])return e;return-1}}function _77(t,e){var a=_cb(t,e);return a.length?a[a.length-1]:a}function _c4(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.dc;if(e=i.loadFilter.call(t,e),$.isArray(e)&&(e={total:e.length,rows:e}),e.total=parseInt(e.total),a.data=e,e.footer&&(a.footer=e.footer),!i.remoteSort&&i.sortName){var d=i.sortName.split(","),n=i.sortOrder.split(",");e.rows.sort((function(e,a){for(var i=0,r=0;r<d.length;r++){var o=d[r],l=n[r];if(0!=(i=(_78(t,o).sorter||function(t,e){return t==e?0:t>e?1:-1})(e[o],a[o],e,a)*("asc"==l?1:-1)))return i}return i}))}i.view.onBeforeRender&&i.view.onBeforeRender.call(i.view,t,e.rows),i.view.render.call(i.view,t,r.body2,!1),i.view.render.call(i.view,t,r.body1,!0),i.showFooter&&(i.view.renderFooter.call(i.view,t,r.footer2,!1),i.view.renderFooter.call(i.view,t,r.footer1,!0)),i.view.onAfterRender&&i.view.onAfterRender.call(i.view,t),a.ss.clean();var o=$(t).datagrid("getPager");if(o.length){var l=o.pagination("options");l.total!=e.total&&(o.pagination("refresh",{pageNumber:i.pageNumber,total:e.total}),i.pageNumber!=l.pageNumber&&l.pageNumber>0&&(i.pageNumber=l.pageNumber,_c3(t)))}_34(t),r.body2.triggerHandler("scroll"),$(t).datagrid("setSelectionState"),$(t).datagrid("autoSizeColumn"),i.onLoadSuccess.call(t,e)}function _117(t){var e=$.data(t,"datagrid"),a=e.options,i=e.dc;if(i.header1.add(i.header2).find("input[type=checkbox]")._propAttr("checked",!1),a.idField){var r=!!$.data(t,"treegrid"),d=a.onSelect,n=a.onCheck;a.onSelect=a.onCheck=function(){};for(var o=a.finder.getRows(t),l=0;l<o.length;l++){var s=o[l],c=r?s[a.idField]:$(t).datagrid("getRowIndex",s[a.idField]);h(e.selectedRows,s)&&_a9(t,c,!0,!0),h(e.checkedRows,s)&&_a6(t,c,!0)}a.onSelect=d,a.onCheck=n}function h(t,e){for(var i=0;i<t.length;i++)if(t[i][a.idField]==e[a.idField])return t[i]=e,!0;return!1}}function _11f(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.data.rows;if("object"==typeof e)return _2(r,e);for(var d=0;d<r.length;d++)if(r[d][i.idField]==e)return d;return-1}function _122(t){var e=$.data(t,"datagrid"),a=e.options;e.data;if(a.idField)return e.selectedRows;var i=[];return a.finder.getTr(t,"","selected",2).each((function(){i.push(a.finder.getRow(t,$(this)))})),i}function _125(t){var e=$.data(t,"datagrid"),a=e.options;if(a.idField)return e.checkedRows;var i=[];return a.finder.getTr(t,"","checked",2).each((function(){i.push(a.finder.getRow(t,$(this)))})),i}function _128(t,e){var a=$.data(t,"datagrid"),i=a.dc,r=a.options,d=r.finder.getTr(t,e);if(d.length){if(d.closest("table").hasClass("datagrid-btable-frozen"))return;var n=i.view2.children("div.datagrid-header")._outerHeight(),o=i.body2,l=r.scrollbarSize;o[0].offsetHeight&&o[0].clientHeight&&o[0].offsetHeight<=o[0].clientHeight&&(l=0);var s=o.outerHeight(!0)-o.outerHeight(),c=d.offset().top-i.view2.offset().top-n-s;c<0?o.scrollTop(o.scrollTop()+c):c+d._outerHeight()>o.height()-l&&o.scrollTop(o.scrollTop()+c+d._outerHeight()-o.height()+l)}}function _a0(t,e){var a=$.data(t,"datagrid"),i=a.options;i.finder.getTr(t,a.highlightIndex).removeClass("datagrid-row-over"),i.finder.getTr(t,e).addClass("datagrid-row-over"),a.highlightIndex=e}function _a9(t,e,a,i){var r=$.data(t,"datagrid"),d=r.options,n=d.finder.getRow(t,e);if(n){var o=d.finder.getTr(t,e);o.hasClass("datagrid-row-selected")||0!=d.onBeforeSelect.apply(t,_5(t,[e,n]))&&(d.singleSelect&&(_138(t,!0),r.selectedRows=[]),!a&&d.checkOnSelect&&_a6(t,e,!0),d.idField&&_4(r.selectedRows,d.idField,n),o.addClass("datagrid-row-selected"),r.selectingData&&r.selectingData.push(n),d.onSelect.apply(t,_5(t,[e,n])),!i&&d.scrollOnSelect&&_128(t,e))}}function _aa(t,e,a){var i=$.data(t,"datagrid"),r=(i.dc,i.options),d=r.finder.getRow(t,e);if(d){var n=r.finder.getTr(t,e);n.hasClass("datagrid-row-selected")&&0!=r.onBeforeUnselect.apply(t,_5(t,[e,d]))&&(!a&&r.checkOnSelect&&_a7(t,e,!0),n.removeClass("datagrid-row-selected"),r.idField&&_3(i.selectedRows,r.idField,d[r.idField]),i.selectingData&&i.selectingData.push(d),r.onUnselect.apply(t,_5(t,[e,d])))}}function _13d(t,e){var a=$.data(t,"datagrid"),i=a.options,r=!!$.data(t,"treegrid"),d=i.scrollOnSelect;i.scrollOnSelect=!1,a.selectingData=[],!e&&i.checkOnSelect&&_8d(t,!0);for(var n=i.finder.getRows(t),o=0;o<n.length;o++){_a9(t,r?n[o][i.idField]:$(t).datagrid("getRowIndex",n[o]))}var l=a.selectingData;a.selectingData=null,i.scrollOnSelect=d,i.onSelectAll.call(t,l)}function _138(t,e){var a=$.data(t,"datagrid"),i=a.options,r=!!$.data(t,"treegrid");a.selectingData=[],!e&&i.checkOnSelect&&_8e(t,!0);for(var d=i.finder.getRows(t),n=0;n<d.length;n++){_aa(t,r?d[n][i.idField]:$(t).datagrid("getRowIndex",d[n]))}var o=a.selectingData;a.selectingData=null,i.onUnselectAll.call(t,o)}function _14b(t){for(var e=$.data(t,"datagrid"),a=e.options,i=[],r=a.finder.getRows(t),d=0;d<r.length;d++){var n=_11f(t,r[d]);0!=a.onBeforeCheck.apply(t,_5(t,[n,r[d]]))&&i.push(r[d])}var o=a.finder.getTr(t,"","checked",2).length==i.length,l=e.dc;l.header1.add(l.header2).find("input[type=checkbox]")._propAttr("checked",o)}function _a6(t,e,a){var i=$.data(t,"datagrid"),r=i.options,d=r.finder.getRow(t,e);if(d){var n=r.finder.getTr(t,e),o=n.find(".datagrid-cell-check input[type=checkbox]");o.is(":checked")||0!=r.onBeforeCheck.apply(t,_5(t,[e,d]))&&(r.singleSelect&&r.selectOnCheck&&(_8e(t,!0),i.checkedRows=[]),!a&&r.selectOnCheck&&_a9(t,e,!0),n.addClass("datagrid-row-checked"),o._propAttr("checked",!0),r.notSetHeaderCheck||_14b(t),r.idField&&_4(i.checkedRows,r.idField,d),i.checkingData&&i.checkingData.push(d),r.onCheck.apply(t,_5(t,[e,d])))}}function _a7(t,e,a){var i=$.data(t,"datagrid"),r=i.options,d=r.finder.getRow(t,e);if(d){var n=r.finder.getTr(t,e),o=n.find("div.datagrid-cell-check input[type=checkbox]");if(o.is(":checked")&&0!=r.onBeforeUncheck.apply(t,_5(t,[e,d]))){!a&&r.selectOnCheck&&_aa(t,e,!0),n.removeClass("datagrid-row-checked"),o._propAttr("checked",!1);var l=i.dc;l.header1.add(l.header2).find("input[type=checkbox]")._propAttr("checked",!1),r.idField&&_3(i.checkedRows,r.idField,d[r.idField]),i.checkingData&&i.checkingData.push(d),r.onUncheck.apply(t,_5(t,[e,d]))}}}function _8d(t,e){var a=$.data(t,"datagrid"),i=a.options,r=!!$.data(t,"treegrid"),d=i.scrollOnSelect;i.scrollOnSelect=!1,i.notSetHeaderCheck=!0,a.checkingData=[],!e&&i.selectOnCheck&&_13d(t,!0);for(var n=i.finder.getRows(t),o=0;o<n.length;o++){_a6(t,r?n[o][i.idField]:$(t).datagrid("getRowIndex",n[o]))}_14b(t);var l=a.checkingData;a.checkingData=null,i.scrollOnSelect=d,i.notSetHeaderCheck=!1,i.onCheckAll.call(t,l)}function _8e(t,e){var a=$.data(t,"datagrid"),i=a.options,r=!!$.data(t,"treegrid");a.checkingData=[],!e&&i.selectOnCheck&&_138(t,!0);for(var d=i.finder.getRows(t),n=0;n<d.length;n++){_a7(t,r?d[n][i.idField]:$(t).datagrid("getRowIndex",d[n]))}var o=a.checkingData;a.checkingData=null,i.onUncheckAll.call(t,o)}function _167(t,e){var a=$.data(t,"datagrid").options,i=a.finder.getTr(t,e),r=a.finder.getRow(t,e);i.hasClass("datagrid-row-editing")||0!=a.onBeforeEdit.apply(t,_5(t,[e,r]))&&(i.addClass("datagrid-row-editing"),_16a(t,e),_fa(t),i.find("div.datagrid-editable").each((function(){var t=$(this).parent().attr("field"),e=$.data(this,"datagrid.editor");e.actions.setValue(e.target,r[t])})),_16c(t,e),a.onBeginEdit.apply(t,_5(t,[e,r])))}function _16d(t,e,a){var i=$.data(t,"datagrid"),r=i.options,d=i.updatedRows,n=i.insertedRows,o=r.finder.getTr(t,e),l=r.finder.getRow(t,e);if(o.hasClass("datagrid-row-editing")){if(!a){if(!_16c(t,e))return;var s=!1,c={};o.find("div.datagrid-editable").each((function(){var t=$(this).parent().attr("field"),e=$.data(this,"datagrid.editor"),a=$(e.target),i=a.data("textbox")?a.textbox("textbox"):a;i.is(":focus")&&i.triggerHandler("blur");var r=e.actions.getValue(e.target);l[t]!==r&&(l[t]=r,s=!0,c[t]=r)})),s&&-1==_2(n,l)&&-1==_2(d,l)&&d.push(l),r.onEndEdit.apply(t,_5(t,[e,l,c]))}o.removeClass("datagrid-row-editing"),_179(t,e),$(t).datagrid("refreshRow",e),a?r.onCancelEdit.apply(t,_5(t,[e,l])):r.onAfterEdit.apply(t,_5(t,[e,l,c]))}}function _17a(t,e){var a=$.data(t,"datagrid").options.finder.getTr(t,e),i=[];return a.children("td").each((function(){var t=$(this).find("div.datagrid-editable");if(t.length){var e=$.data(t[0],"datagrid.editor");i.push(e)}})),i}function _17e(t,e){for(var a=_17a(t,null!=e.index?e.index:e.id),i=0;i<a.length;i++)if(a[i].field==e.field)return a[i];return null}function _16a(t,e){var a=$.data(t,"datagrid").options;a.finder.getTr(t,e).children("td").each((function(){var e=$(this).find("div.datagrid-cell"),i=$(this).attr("field"),r=_78(t,i);if(r&&r.editor){var d,n;"string"==typeof r.editor?d=r.editor:(d=r.editor.type,n=r.editor.options);var o=a.editors[d];if(o){var l=e.html(),s=e._outerWidth();e.addClass("datagrid-editable"),e._outerWidth(s),e.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),e.children("table")._bind("click dblclick contextmenu",(function(t){t.stopPropagation()})),$.data(e[0],"datagrid.editor",{actions:o,target:o.init(e.find("td"),$.extend({height:a.editorHeight},n)),field:i,type:d,oldHtml:l})}}})),_34(t,e,!0)}function _179(t,e){$.data(t,"datagrid").options.finder.getTr(t,e).children("td").each((function(){var t=$(this).find("div.datagrid-editable");if(t.length){var e=$.data(t[0],"datagrid.editor");e.actions.destroy&&e.actions.destroy(e.target),t.html(e.oldHtml),$.removeData(t[0],"datagrid.editor"),t.removeClass("datagrid-editable"),t.css("width","")}}))}function _16c(t,e){var a=$.data(t,"datagrid").options.finder.getTr(t,e);if(!a.hasClass("datagrid-row-editing"))return!0;var i=a.find(".validatebox-text");return i.validatebox("validate"),i.trigger("mouseleave"),0==a.find(".validatebox-invalid").length}function _18f(t,e){var a=$.data(t,"datagrid").insertedRows,i=$.data(t,"datagrid").deletedRows,r=$.data(t,"datagrid").updatedRows;if(!e){var d=[];return d=(d=(d=d.concat(a)).concat(i)).concat(r)}return"inserted"==e?a:"deleted"==e?i:"updated"==e?r:[]}function _195(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.data,d=a.insertedRows,n=a.deletedRows;$(t).datagrid("cancelEdit",e);var o=i.finder.getRow(t,e);_2(d,o)>=0?_3(d,o):n.push(o),_3(a.selectedRows,i.idField,o[i.idField]),_3(a.checkedRows,i.idField,o[i.idField]),i.view.deleteRow.call(i.view,t,e),"auto"==i.height&&_34(t),$(t).datagrid("getPager").pagination("refresh",{total:r.total})}function _19b(t,e){var a=$.data(t,"datagrid").data,i=$.data(t,"datagrid").options.view,r=$.data(t,"datagrid").insertedRows;i.insertRow.call(i,t,e.index,e.row),r.push(e.row),$(t).datagrid("getPager").pagination("refresh",{total:a.total})}function _19f(t,e){var a=$.data(t,"datagrid").data,i=$.data(t,"datagrid").options.view,r=$.data(t,"datagrid").insertedRows;i.insertRow.call(i,t,null,e),r.push(e),$(t).datagrid("getPager").pagination("refresh",{total:a.total})}function _1a2(t,e){var a=$.data(t,"datagrid"),i=a.options,r=i.finder.getRow(t,e.index),d=!1;for(var n in e.row=e.row||{},e.row)if(r[n]!==e.row[n]){d=!0;break}d&&(-1==_2(a.insertedRows,r)&&-1==_2(a.updatedRows,r)&&a.updatedRows.push(r),i.view.updateRow.call(i.view,t,e.index,e.row))}function _1a8(t){for(var e=$.data(t,"datagrid"),a=e.data.rows,i=[],r=0;r<a.length;r++)i.push($.extend({},a[r]));e.originalRows=i,e.updatedRows=[],e.insertedRows=[],e.deletedRows=[]}function _1ac(t){for(var e=!0,a=0,i=$.data(t,"datagrid").data.rows.length;a<i;a++)_16c(t,a)?$(t).datagrid("endEdit",a):e=!1;e&&_1a8(t)}function _1ae(t){var e=$.data(t,"datagrid"),a=e.options,i=e.originalRows,r=e.insertedRows,d=e.deletedRows,n=e.selectedRows,o=e.checkedRows,l=e.data;function s(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i][a.idField]);return e}function c(e,a){for(var i=0;i<e.length;i++){var r=_11f(t,e[i]);r>=0&&("s"==a?_a9:_a6)(t,r,!0)}}for(var h=0;h<l.rows.length;h++)$(t).datagrid("cancelEdit",h);var g=s(n),f=s(o);n.splice(0,n.length),o.splice(0,o.length),l.total+=d.length-r.length,l.rows=i,_c4(t,l),c(g,"s"),c(f,"c"),_1a8(t)}function _c3(t,e,a){var i=$.data(t,"datagrid").options;e&&(i.queryParams=e);var r=$.extend({},i.queryParams);if(i.pagination&&$.extend(r,{page:i.pageNumber||1,rows:i.pageSize}),i.sortName&&i.remoteSort&&$.extend(r,{sort:i.sortName,order:i.sortOrder}),0!=i.onBeforeLoad.call(t,r)){$(t).datagrid("loading");var d=i.loader.call(t,r,(function(e){$(t).datagrid("loaded"),$(t).datagrid("loadData",e),a&&a()}),(function(){$(t).datagrid("loaded"),i.onLoadError.apply(t,arguments)}));0==d&&($(t).datagrid("loaded"),i.view.setEmptyMsg(t))}else i.view.setEmptyMsg(t)}function _1c0(t,e){var a=$.data(t,"datagrid").options;if(e.type=e.type||"body",e.rowspan=e.rowspan||1,e.colspan=e.colspan||1,1!=e.rowspan||1!=e.colspan){var i=a.finder.getTr(t,null!=e.index?e.index:e.id,e.type);if(i.length){var r=i.find('td[field="'+e.field+'"]');r.attr("rowspan",e.rowspan).attr("colspan",e.colspan),r.addClass("datagrid-td-merged"),n(r.next(),e.colspan-1);for(var d=1;d<e.rowspan&&(i=i.next()).length;d++)n(i.find('td[field="'+e.field+'"]'),e.colspan);_f9(t,r)}}function n(t,e){for(var a=0;a<e;a++)t.hide(),t=t.next()}}function _1c9(t){var e={};return $.map(t,(function(t){e[t]=function(t){function e(e){return null!=$.data($(e)[0],t)}return{init:function(e,a){var i=$('<input type="text" class="datagrid-editable-input">').appendTo(e);return i[t]&&"text"!=t?i[t](a):i},destroy:function(a){e(a,t)&&$(a)[t]("destroy")},getValue:function(a){if(e(a,t)){var i=$(a)[t]("options");return i.multiple?$(a)[t]("getValues").join(i.separator):$(a)[t]("getValue")}return $(a).val()},setValue:function(a,i){if(e(a,t)){var r=$(a)[t]("options");r.multiple?i?$(a)[t]("setValues",i.split(r.separator)):$(a)[t]("clear"):$(a)[t]("setValue",i)}else $(a).val(i)},resize:function(a,i){e(a,t)?$(a)[t]("resize",i):$(a)._size({width:i,height:$.fn.datagrid.defaults.editorHeight})}}}(t)})),e}$.fn.datagrid=function(t,e){return"string"==typeof t?$.fn.datagrid.methods[t](this,e):(t=t||{},this.each((function(){var e,a=$.data(this,"datagrid");if(a)e=$.extend(a.options,t),a.options=e;else{e=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),t),$(this).css("width","").css("height","");var i=_4e(this,e.rownumbers);e.columns||(e.columns=i.columns),e.frozenColumns||(e.frozenColumns=i.frozenColumns),e.columns=$.extend(!0,[],e.columns),e.frozenColumns=$.extend(!0,[],e.frozenColumns),e.view=$.extend({},e.view),$.data(this,"datagrid",{options:e,panel:i.panel,dc:i.dc,ss:null,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})}if(_59(this),_79(this),_1a(this),e.data)$(this).datagrid("loadData",e.data);else{var r=$.fn.datagrid.parseData(this);r.total>0?$(this).datagrid("loadData",r):$(this).datagrid("autoSizeColumn")}_c3(this)})))};var _1d7=$.extend({},_1c9(["text","textbox","passwordbox","filebox","numberbox","numberspinner","combobox","combotree","combogrid","combotreegrid","datebox","datetimebox","timespinner","datetimespinner"]),{textarea:{init:function(t,e){var a=$('<textarea class="datagrid-editable-input"></textarea>').appendTo(t);return a.css("vertical-align","middle")._outerHeight(e.height),a},getValue:function(t){return $(t).val()},setValue:function(t,e){$(t).val(e)},resize:function(t,e){$(t)._outerWidth(e)}},checkbox:{init:function(t,e){var a=$('<input type="checkbox">').appendTo(t);return a.val(e.on),a.attr("offval",e.off),a},getValue:function(t){return $(t).is(":checked")?$(t).val():$(t).attr("offval")},setValue:function(t,e){var a=!1;$(t).val()==e&&(a=!0),$(t)._propAttr("checked",a)}},validatebox:{init:function(t,e){var a=$('<input type="text" class="datagrid-editable-input">').appendTo(t);return a.validatebox(e),a},destroy:function(t){$(t).validatebox("destroy")},getValue:function(t){return $(t).val()},setValue:function(t,e){$(t).val(e)},resize:function(t,e){$(t)._outerWidth(e)._outerHeight($.fn.datagrid.defaults.editorHeight)}}});$.fn.datagrid.methods={options:function(t){var e=$.data(t[0],"datagrid").options,a=$.data(t[0],"datagrid").panel.panel("options");return $.extend(e,{width:a.width,height:a.height,closed:a.closed,collapsed:a.collapsed,minimized:a.minimized,maximized:a.maximized})},setSelectionState:function(t){return t.each((function(){_117(this)}))},createStyleSheet:function(t){return _7(t[0])},getPanel:function(t){return $.data(t[0],"datagrid").panel},getPager:function(t){return $.data(t[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(t,e){return _77(t[0],e)},getColumnOption:function(t,e){return _78(t[0],e)},resize:function(t,e){return t.each((function(){_1a(this,e)}))},load:function(t,e){return t.each((function(){var t=$(this).datagrid("options");"string"==typeof e&&(t.url=e,e=null),t.pageNumber=1,$(this).datagrid("getPager").pagination("refresh",{pageNumber:1}),_c3(this,e)}))},reload:function(t,e){return t.each((function(){var t=$(this).datagrid("options");"string"==typeof e&&(t.url=e,e=null),_c3(this,e)}))},reloadFooter:function(t,e){return t.each((function(){var t=$.data(this,"datagrid").options,a=$.data(this,"datagrid").dc;e&&($.data(this,"datagrid").footer=e),t.showFooter&&(t.view.renderFooter.call(t.view,this,a.footer2,!1),t.view.renderFooter.call(t.view,this,a.footer1,!0),t.view.onAfterRender&&t.view.onAfterRender.call(t.view,this),$(this).datagrid("fixRowHeight"))}))},loading:function(t){return t.each((function(){var t=$.data(this,"datagrid").options;if($(this).datagrid("getPager").pagination("loading"),t.loadMsg){var e=$(this).datagrid("getPanel");if(!e.children("div.datagrid-mask").length){$('<div class="datagrid-mask" style="display:block"></div>').appendTo(e);var a=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(t.loadMsg).appendTo(e);a._outerHeight(40),a.css({marginLeft:-a.outerWidth()/2,lineHeight:a.height()+"px"})}}}))},loaded:function(t){return t.each((function(){$(this).datagrid("getPager").pagination("loaded");var t=$(this).datagrid("getPanel");t.children("div.datagrid-mask-msg").remove(),t.children("div.datagrid-mask").remove()}))},fitColumns:function(t){return t.each((function(){_d0(this)}))},fixColumnSize:function(t,e){return t.each((function(){_f3(this,e)}))},fixRowHeight:function(t,e){return t.each((function(){_34(this,e)}))},freezeRow:function(t,e){return t.each((function(){_46(this,e)}))},autoSizeColumn:function(t,e){return t.each((function(){_e4(this,e)}))},loadData:function(t,e){return t.each((function(){_c4(this,e),_1a8(this)}))},getData:function(t){return $.data(t[0],"datagrid").data},getRows:function(t){return $.data(t[0],"datagrid").data.rows},getFooterRows:function(t){return $.data(t[0],"datagrid").footer},getRowIndex:function(t,e){return _11f(t[0],e)},getChecked:function(t){return _125(t[0])},getSelected:function(t){var e=_122(t[0]);return e.length>0?e[0]:null},getSelections:function(t){return _122(t[0])},clearSelections:function(t){return t.each((function(){var t=$.data(this,"datagrid"),e=t.selectedRows,a=t.checkedRows;e.splice(0,e.length),_138(this),t.options.checkOnSelect&&a.splice(0,a.length)}))},clearChecked:function(t){return t.each((function(){var t=$.data(this,"datagrid"),e=t.selectedRows,a=t.checkedRows;a.splice(0,a.length),_8e(this),t.options.selectOnCheck&&e.splice(0,e.length)}))},scrollTo:function(t,e){return t.each((function(){_128(this,e)}))},highlightRow:function(t,e){return t.each((function(){_a0(this,e),_128(this,e)}))},selectAll:function(t){return t.each((function(){_13d(this)}))},unselectAll:function(t){return t.each((function(){_138(this)}))},selectRow:function(t,e){return t.each((function(){_a9(this,e)}))},selectRecord:function(t,e){return t.each((function(){if($.data(this,"datagrid").options.idField){var t=_11f(this,e);t>=0&&$(this).datagrid("selectRow",t)}}))},unselectRow:function(t,e){return t.each((function(){_aa(this,e)}))},checkRow:function(t,e){return t.each((function(){_a6(this,e)}))},uncheckRow:function(t,e){return t.each((function(){_a7(this,e)}))},checkAll:function(t){return t.each((function(){_8d(this)}))},uncheckAll:function(t){return t.each((function(){_8e(this)}))},beginEdit:function(t,e){return t.each((function(){_167(this,e)}))},endEdit:function(t,e){return t.each((function(){_16d(this,e,!1)}))},cancelEdit:function(t,e){return t.each((function(){_16d(this,e,!0)}))},getEditors:function(t,e){return _17a(t[0],e)},getEditor:function(t,e){return _17e(t[0],e)},refreshRow:function(t,e){return t.each((function(){var t=$.data(this,"datagrid").options;t.view.refreshRow.call(t.view,this,e)}))},validateRow:function(t,e){return _16c(t[0],e)},updateRow:function(t,e){return t.each((function(){_1a2(this,e)}))},appendRow:function(t,e){return t.each((function(){_19f(this,e)}))},insertRow:function(t,e){return t.each((function(){_19b(this,e)}))},deleteRow:function(t,e){return t.each((function(){_195(this,e)}))},getChanges:function(t,e){return _18f(t[0],e)},acceptChanges:function(t){return t.each((function(){_1ac(this)}))},rejectChanges:function(t){return t.each((function(){_1ae(this)}))},mergeCells:function(t,e){return t.each((function(){_1c0(this,e)}))},showColumn:function(t,e){return t.each((function(){var t=$(this).datagrid("getColumnOption",e);t.hidden&&(t.hidden=!1,$(this).datagrid("getPanel").find('td[field="'+e+'"]').show(),_c5(this,e,1),$(this).datagrid("fitColumns"))}))},hideColumn:function(t,e){return t.each((function(){var t=$(this).datagrid("getColumnOption",e);t.hidden||(t.hidden=!0,$(this).datagrid("getPanel").find('td[field="'+e+'"]').hide(),_c5(this,e,-1),$(this).datagrid("fitColumns"))}))},sort:function(t,e){return t.each((function(){_90(this,e)}))},gotoPage:function(t,e){return t.each((function(){var t,a,i=this;"object"==typeof e?(t=e.page,a=e.callback):t=e,$(i).datagrid("options").pageNumber=t,$(i).datagrid("getPager").pagination("refresh",{pageNumber:t}),_c3(i,null,(function(){a&&a.call(i,t)}))}))}},$.fn.datagrid.parseOptions=function(_21d){var t=$(_21d);return $.extend({},$.fn.panel.parseOptions(_21d),$.parser.parseOptions(_21d,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{sharedStyleSheet:"boolean",fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",ctrlSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number",scrollOnSelect:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:null!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(t){var e=$(t),a={total:0,rows:[]},i=e.datagrid("getColumnFields",!0).concat(e.datagrid("getColumnFields",!1));return e.find("tbody tr").each((function(){a.total++;var t={};$.extend(t,$.parser.parseOptions(this,["iconCls","state"]));for(var e=0;e<i.length;e++)t[i[e]]=$(this).find("td:eq("+e+")").html();a.rows.push(t)})),a};var _220={render:function(t,e,a){var i=$(t).datagrid("getRows");$(e).empty().html(this.renderTable(t,0,i,a))},renderFooter:function(t,e,a){$.data(t,"datagrid").options;for(var i=$.data(t,"datagrid").footer||[],r=$(t).datagrid("getColumnFields",a),d=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],n=0;n<i.length;n++)d.push('<tr class="datagrid-row" datagrid-row-index="'+n+'">'),d.push(this.renderRow.call(this,t,r,a,n,i[n])),d.push("</tr>");d.push("</tbody></table>"),$(e).html(d.join(""))},renderTable:function(t,e,a,i){var r=$.data(t,"datagrid"),d=r.options;if(i&&!(d.rownumbers||d.frozenColumns&&d.frozenColumns.length))return"";for(var n=$(t).datagrid("getColumnFields",i),o=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],l=0;l<a.length;l++){var s=a[l],c=d.rowStyler?d.rowStyler.call(t,e,s):"",h=this.getStyleValue(c),g='class="datagrid-row '+(e%2&&d.striped?"datagrid-row-alt ":" ")+h.c+'"',f=h.s?'style="'+h.s+'"':"",u=r.rowIdPrefix+"-"+(i?1:2)+"-"+e;o.push('<tr id="'+u+'" datagrid-row-index="'+e+'" '+g+" "+f+">"),o.push(this.renderRow.call(this,t,n,i,e,s)),o.push("</tr>"),e++}return o.push("</tbody></table>"),o.join("")},renderRow:function(t,e,a,i,r){var d=$.data(t,"datagrid").options,n=[];if(a&&d.rownumbers){var o=i+1;d.pagination&&(o+=(d.pageNumber-1)*d.pageSize),n.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+o+"</div></td>")}for(var l=0;l<e.length;l++){var s=e[l],c=$(t).datagrid("getColumnOption",s);if(c){var h=r[s],g=c.styler&&c.styler.call(t,h,r,i)||"",f=this.getStyleValue(g),u=f.c?'class="'+f.c+'"':"",p=c.hidden?'style="display:none;'+f.s+'"':f.s?'style="'+f.s+'"':"";n.push('<td field="'+s+'" '+u+" "+p+">");p="";c.checkbox||(c.align&&(p+="text-align:"+c.align+";"),d.nowrap?d.autoRowHeight&&(p+="height:auto;"):p+="white-space:normal;height:auto;"),n.push('<div style="'+p+'" '),n.push(c.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+c.cellClass+'"'),n.push(">"),c.checkbox?(n.push('<input type="checkbox" '+(r.checked?'checked="checked"':"")),n.push(' name="'+s+'" value="'+(null!=h?h:"")+'">')):c.formatter?n.push(c.formatter(h,r,i)):n.push(h),n.push("</div>"),n.push("</td>")}}return n.join("")},getStyleValue:function(t){var e="",a="";return"string"==typeof t?a=t:t&&(e=t.class||"",a=t.style||""),{c:e,s:a}},refreshRow:function(t,e){this.updateRow.call(this,t,e,{})},updateRow:function(t,e,a){var i=$.data(t,"datagrid").options,r=i.finder.getRow(t,e);$.extend(r,a);var d=function(e){var a=i.rowStyler?i.rowStyler.call(t,e,r):"";return this.getStyleValue(a)}.call(this,e),n=d.s,o="datagrid-row "+(e%2&&i.striped?"datagrid-row-alt ":" ")+d.c;function l(a){var d=i.finder.getTr(t,e,"body",a?1:2);if(d.length){var l=$(t).datagrid("getColumnFields",a),s=d.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");d.html(this.renderRow.call(this,t,l,a,e,r));var c=(d.hasClass("datagrid-row-checked")?" datagrid-row-checked":"")+(d.hasClass("datagrid-row-selected")?" datagrid-row-selected":"");d.attr("style",n).attr("class",o+c),s&&d.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}}l.call(this,!0),l.call(this,!1),$(t).datagrid("fixRowHeight",e)},insertRow:function(t,e,a){var i=$.data(t,"datagrid"),r=i.options,d=i.dc,n=i.data;function o(a){for(var d=a?1:2,o=n.rows.length-1;o>=e;o--){var l=r.finder.getTr(t,o,"body",d);if(l.attr("datagrid-row-index",o+1),l.attr("id",i.rowIdPrefix+"-"+d+"-"+(o+1)),a&&r.rownumbers){var s=o+2;r.pagination&&(s+=(r.pageNumber-1)*r.pageSize),l.find("div.datagrid-cell-rownumber").html(s)}r.striped&&l.removeClass("datagrid-row-alt").addClass((o+1)%2?"datagrid-row-alt":"")}}function l(a){var o=a?1:2,l=($(t).datagrid("getColumnFields",a),'<tr id="'+(i.rowIdPrefix+"-"+o+"-"+e)+'" class="datagrid-row" datagrid-row-index="'+e+'"></tr>');e>=n.rows.length?n.rows.length?r.finder.getTr(t,"","last",o).after(l):(a?d.body1:d.body2).html('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'+l+"</tbody></table>"):r.finder.getTr(t,e+1,"body",o).before(l)}null!=e&&null!=e||(e=n.rows.length),e>n.rows.length&&(e=n.rows.length),o.call(this,!0),o.call(this,!1),l.call(this,!0),l.call(this,!1),n.total+=1,n.rows.splice(e,0,a),this.setEmptyMsg(t),this.refreshRow.call(this,t,e)},deleteRow:function(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.data;function d(d){for(var n=d?1:2,o=e+1;o<r.rows.length;o++){var l=i.finder.getTr(t,o,"body",n);if(l.attr("datagrid-row-index",o-1),l.attr("id",a.rowIdPrefix+"-"+n+"-"+(o-1)),d&&i.rownumbers){var s=o;i.pagination&&(s+=(i.pageNumber-1)*i.pageSize),l.find("div.datagrid-cell-rownumber").html(s)}i.striped&&l.removeClass("datagrid-row-alt").addClass((o-1)%2?"datagrid-row-alt":"")}}i.finder.getTr(t,e).remove(),d.call(this,!0),d.call(this,!1),r.total-=1,r.rows.splice(e,1),this.setEmptyMsg(t)},onBeforeRender:function(t,e){},onAfterRender:function(t){$.data(t,"datagrid").options.showFooter&&$(t).datagrid("getPanel").find("div.datagrid-footer").find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden");this.setEmptyMsg(t)},setEmptyMsg:function(t){var e=$.data(t,"datagrid"),a=e.options,i=0==a.finder.getRows(t).length;if(i&&this.renderEmptyRow(t),a.emptyMsg&&(e.dc.view.children(".datagrid-empty").remove(),i)){var r=e.dc.header2.parent().outerHeight();$('<div class="datagrid-empty"></div>').appendTo(e.dc.view).html(a.emptyMsg).css("top",r+"px")}},renderEmptyRow:function(t){var e=$(t).datagrid("options"),a=$.map($(t).datagrid("getColumnFields"),(function(e){return $(t).datagrid("getColumnOption",e)}));$.map(a,(function(t){t.formatter1=t.formatter,t.styler1=t.styler,t.formatter=t.styler=void 0}));var i=e.rowStyler;e.rowStyler=function(){};var r=$.data(t,"datagrid").dc.body2;r.html(this.renderTable(t,0,[{}],!1)),r.find("tbody *").css({height:1,borderColor:"transparent",background:"transparent"});var d=r.find(".datagrid-row");d.removeClass("datagrid-row").removeAttr("datagrid-row-index"),d.find(".datagrid-cell,.datagrid-cell-check").empty(),$.map(a,(function(t){t.formatter=t.formatter1,t.styler=t.styler1,t.formatter1=t.styler1=void 0})),e.rowStyler=i}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{sharedStyleSheet:!1,frozenColumns:void 0,columns:void 0,fitColumns:!1,resizeHandle:"right",resizeEdge:5,autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"Processing, please wait ...",emptyMsg:"",rownumbers:!1,singleSelect:!1,ctrlSelect:!1,selectOnCheck:!0,checkOnSelect:!0,pagination:!1,pagePosition:"bottom",pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollOnSelect:!0,scrollbarSize:18,rownumberWidth:30,editorHeight:31,headerEvents:{mouseover:_86(!0),mouseout:_86(!1),click:_8a,dblclick:_91,contextmenu:_97},rowEvents:{mouseover:_9a(!0),mouseout:_9a(!1),click:_a2,dblclick:_ad,contextmenu:_b2},rowStyler:function(t,e){},loader:function(t,e,a){var i=$(this).datagrid("options");if(!i.url)return!1;$.ajax({type:i.method,url:i.url,data:t,dataType:"json",success:function(t){e(t)},error:function(){a.apply(this,arguments)}})},loadFilter:function(t){return t},editors:_1d7,finder:{getTr:function(t,e,a,i){a=a||"body",i=i||0;var r=$.data(t,"datagrid"),d=r.dc,n=r.options;if(0==i){var o=n.finder.getTr(t,e,a,1),l=n.finder.getTr(t,e,a,2);return o.add(l)}if("body"==a){var s=$("#"+r.rowIdPrefix+"-"+i+"-"+e);return s.length||(s=(1==i?d.body1:d.body2).find(">table>tbody>tr[datagrid-row-index="+e+"]")),s}return"footer"==a?(1==i?d.footer1:d.footer2).find(">table>tbody>tr[datagrid-row-index="+e+"]"):"selected"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr.datagrid-row-checked"):"editing"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr.datagrid-row-editing"):"last"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==a?(1==i?d.body1:d.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==a?(1==i?d.footer1:d.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0},getRow:function(t,e){var a="object"==typeof e?e.attr("datagrid-row-index"):e;return $.data(t,"datagrid").data.rows[parseInt(a)]},getRows:function(t){return $(t).datagrid("getRows")}},view:_220,onBeforeLoad:function(t){},onLoadSuccess:function(){},onLoadError:function(){},onClickRow:function(t,e){},onDblClickRow:function(t,e){},onClickCell:function(t,e,a){},onDblClickCell:function(t,e,a){},onBeforeSortColumn:function(t,e){},onSortColumn:function(t,e){},onResizeColumn:function(t,e){},onBeforeSelect:function(t,e){},onSelect:function(t,e){},onBeforeUnselect:function(t,e){},onUnselect:function(t,e){},onSelectAll:function(t){},onUnselectAll:function(t){},onBeforeCheck:function(t,e){},onCheck:function(t,e){},onBeforeUncheck:function(t,e){},onUncheck:function(t,e){},onCheckAll:function(t){},onUncheckAll:function(t){},onBeforeEdit:function(t,e){},onBeginEdit:function(t,e){},onEndEdit:function(t,e,a){},onAfterEdit:function(t,e,a){},onCancelEdit:function(t,e){},onHeaderContextMenu:function(t,e){},onRowContextMenu:function(t,e,a){}})})(jQuery);