/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){function t(t){e(document)._unbind(".messager")._bind("keydown.messager",(function(t){if(27==t.keyCode)e("body").children("div.messager-window").children("div.messager-body").each((function(){e(this).dialog("close")}));else if(9==t.keyCode){var s=e("body").children("div.messager-window");if(!s.length)return;for(var n=s.find(".messager-input,.messager-button .l-btn"),i=0;i<n.length;i++)if(e(n[i]).is(":focus"))return e(n[i>=n.length-1?0:i+1]).focus(),!1}else if(13==t.keyCode){var a=e(t.target).closest("input.messager-input");a.length&&o(a.closest(".messager-body"),a.val())}}));var n=e('<div class="messager-body"></div>').appendTo("body");return n.dialog(e.extend({},t,{noheader:!t.title,onClose:function(){e(document)._unbind(".messager"),t.onClose&&t.onClose.call(this),n.dialog("destroy"),s()}})),n.dialog("dialog").addClass("messager-window").find(".dialog-button").addClass("messager-button").find("a:first").focus(),n}function o(e,t){var o=e.dialog("options");e.dialog("close"),o.fn(t)}function s(){var t=20+document.body.scrollTop+document.documentElement.scrollTop;e("body>.messager-tip").each((function(){e(this).animate({top:t},200),t+=e(this)._outerHeight()+10}))}e.messager={show:function(t){return o=t,s=e.extend({},e.messager.defaults,{modal:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:e.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},title:"",width:300,height:150,minHeight:0,showType:"slide",showSpeed:600,content:o.msg,timeout:4e3},o),(n=e('<div class="messager-body"></div>').appendTo("body")).dialog(e.extend({},s,{noheader:!s.title,openAnimation:s.showType,closeAnimation:"show"==s.showType?"hide":s.showType,openDuration:s.showSpeed,closeDuration:s.showSpeed,onOpen:function(){function e(){s.timeout>0&&(s.timer=setTimeout((function(){n.length&&n.data("dialog")&&n.dialog("close")}),s.timeout))}n.dialog("dialog").hover((function(){s.timer&&clearTimeout(s.timer)}),(function(){e()})),e(),o.onOpen?o.onOpen.call(this):s.onOpen.call(this)},onClose:function(){s.timer&&clearTimeout(s.timer),o.onClose?o.onClose.call(this):s.onClose.call(this),n.dialog("destroy")}})),n.dialog("dialog").css(s.style),n.dialog("open"),n;var o,s,n},tip:function(o){var n="object"==typeof o?o:{msg:o};null==n.timeout&&(n.timeout=2e3);var i=0,a=e("body>.messager-tip").last();a.length&&(i=parseInt(a.css("top"))+a._outerHeight());var l=n.icon?"messager-icon messager-"+n.icon:"",d=t(n=e.extend({},e.messager.defaults,{content:'<div class="'+l+'"></div><div style="white-space:nowrap">'+n.msg+'</div><div style="clear:both;"></div>',border:!1,noheader:!0,modal:!1,title:null,width:"auto",height:"auto",minHeight:null,shadow:!1,top:i,cls:"messager-tip",bodyCls:"f-row f-vcenter f-full"},n));return n.timeout&&setTimeout((function(){e(d).closest("body").length&&e(d).dialog("close")}),n.timeout),setTimeout((function(){s()}),0),d},alert:function(s,n,i,a){var l="object"==typeof s?s:{title:s,msg:n,icon:i,fn:a},d=l.icon?"messager-icon messager-"+l.icon:"";(l=e.extend({},e.messager.defaults,{content:'<div class="'+d+'"></div><div>'+l.msg+'</div><div style="clear:both;"></div>'},l)).buttons||(l.buttons=[{text:l.ok,onClick:function(){o(r)}}]);var r=t(l);return r},confirm:function(s,n,i){var a="object"==typeof s?s:{title:s,msg:n,fn:i};(a=e.extend({},e.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+a.msg+'</div><div style="clear:both;"></div>'},a)).buttons||(a.buttons=[{text:a.ok,onClick:function(){o(l,!0)}},{text:a.cancel,onClick:function(){o(l,!1)}}]);var l=t(a);return l},prompt:function(s,n,i){var a="object"==typeof s?s:{title:s,msg:n,fn:i};(a=e.extend({},e.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+a.msg+'</div><br><div style="clear:both;"></div><div><input class="messager-input" type="text"></div>'},a)).buttons||(a.buttons=[{text:a.ok,onClick:function(){o(l,l.find(".messager-input").val())}},{text:a.cancel,onClick:function(){o(l)}}]);var l=t(a);return l.find(".messager-input").focus(),l},progress:function(o){var s={bar:function(){return e("body>div.messager-window").find("div.messager-p-bar")},close:function(){var t=e("body>div.messager-window>div.messager-body:has(div.messager-progress)");t.length&&t.dialog("close")}};if("string"==typeof o)return(0,s[o])();o=o||{};var n=e.extend({},{title:"",minHeight:0,content:void 0,msg:"",text:void 0,interval:300},o),i=t(e.extend({},e.messager.defaults,{content:'<div class="messager-progress"><div class="messager-p-msg">'+n.msg+'</div><div class="messager-p-bar"></div></div>',closable:!1,doSize:!1},n,{onClose:function(){this.timer&&clearInterval(this.timer),o.onClose?o.onClose.call(this):e.messager.defaults.onClose.call(this)}})),a=i.find("div.messager-p-bar");return a.progressbar({text:n.text}),i.dialog("resize"),n.interval&&(i[0].timer=setInterval((function(){var e=a.progressbar("getValue");(e+=10)>100&&(e=0),a.progressbar("setValue",e)}),n.interval)),i}},e.messager.defaults=e.extend({},e.fn.dialog.defaults,{ok:"Ok",cancel:"Cancel",width:300,height:"auto",minHeight:150,modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,fn:function(){}})}(jQuery);