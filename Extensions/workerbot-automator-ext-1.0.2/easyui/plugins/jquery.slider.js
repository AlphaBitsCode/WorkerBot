/* Copyright (C) 2023 by WorkerBot.AI */
(function($){function _1(e){var t=$('<div class="slider"><div class="slider-inner"><a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span></div><div class="slider-rule"></div><div class="slider-rulelabel"></div><div style="clear:both"></div><input type="hidden" class="slider-value"></div>').insertAfter(e),i=$(e);i.addClass("slider-f").hide();var a=i.attr("name");return a&&(t.find("input.slider-value").attr("name",a),i.removeAttr("name").attr("sliderName",a)),t._bind("_resize",(function(t,i){return($(this).hasClass("easyui-fluid")||i)&&_6(e),!1})),t}function _6(e,t){var i=$.data(e,"slider"),a=i.options,r=i.slider;t&&(t.width&&(a.width=t.width),t.height&&(a.height=t.height)),r._size(a),"h"==a.mode?(r.css("height",""),r.children("div").css("height","")):(r.css("width",""),r.children("div").css("width",""),r.children("div.slider-rule,div.slider-rulelabel,div.slider-inner")._outerHeight(r._outerHeight())),_c(e)}function _d(e){var t=$.data(e,"slider"),i=t.options,a=t.slider,r="h"==i.mode?i.rule:i.rule.slice(0).reverse();i.reversed&&(r=r.slice(0).reverse()),function(e){var t=a.find("div.slider-rule"),r=a.find("div.slider-rulelabel");t.empty(),r.empty();for(var n=0;n<e.length;n++){var s=100*n/(e.length-1)+"%",l=$("<span></span>").appendTo(t);l.css("h"==i.mode?"left":"top",s),"|"!=e[n]&&((l=$("<span></span>").appendTo(r)).html(e[n]),"h"==i.mode?l.css({left:s,marginLeft:-Math.round(l.outerWidth()/2)}):l.css({top:s,marginTop:-Math.round(l.outerHeight()/2)}))}}(r)}function _17(e){var t=$.data(e,"slider"),i=t.options,a=t.slider;a.removeClass("slider-h slider-v slider-disabled"),a.addClass("h"==i.mode?"slider-h":"slider-v"),a.addClass(i.disabled?"slider-disabled":"");var r=a.find(".slider-inner");function n(t,a){var r,n,s,l=_25(e,t),d=Math.abs(l%i.step);if(l>=0?d<i.step/2?l-=d:l=l-d+i.step:d<i.step/2?l+=d:l=l+d-i.step,r=l,n=String(i.step).split("."),s=n.length>1?n[1].length:0,l=parseFloat(r.toFixed(s)),i.range){var o=i.value[0],u=i.value[1],h=parseFloat((o+u)/2);if(a){var p=$(a).nextAll(".slider-handle").length>0;l<=u&&p?o=l:l>=o&&!p&&(u=l)}else l<o?o=l:l>u?u=l:l<h?o=l:u=l;$(e).slider("setValues",[o,u])}else $(e).slider("setValue",l)}r.html('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),i.range&&r.append('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),a.find("a.slider-handle").draggable({axis:i.mode,cursor:"pointer",disabled:i.disabled,onDrag:function(e){var t=e.data.left,r=a.width();return"h"!=i.mode&&(t=e.data.top,r=a.height()),t<0||t>r||n(t,this),!1},onStartDrag:function(){t.isDragging=!0,i.onSlideStart.call(e,i.value)},onStopDrag:function(a){n("h"==i.mode?a.data.left:a.data.top,this),i.onSlideEnd.call(e,i.value),i.onComplete.call(e,i.value),t.isDragging=!1}}),a.find("div.slider-inner")._unbind(".slider")._bind("mousedown.slider",(function(a){if(!t.isDragging&&!i.disabled){var r=$(this).offset();n("h"==i.mode?a.pageX-r.left:a.pageY-r.top),i.onComplete.call(e,i.value)}}))}function _27(e,t){var i=$.data(e,"slider"),a=i.options,r=i.slider,n=$.isArray(a.value)?a.value:[a.value],s=[];$.isArray(t)||(t=$.map(String(t).split(a.separator),(function(e){return parseFloat(e)}))),r.find(".slider-value").remove();for(var l=$(e).attr("sliderName")||"",d=0;d<t.length;d++){var o=t[d];o<a.min&&(o=a.min),o>a.max&&(o=a.max);var u=$('<input type="hidden" class="slider-value">').appendTo(r);u.attr("name",l),u.val(o),s.push(o);var h=r.find(".slider-handle:eq("+d+")"),p=h.next(),v=_33(e,o);if(a.showTip?(p.show(),p.html(a.tipFormatter.call(e,o))):p.hide(),"h"==a.mode){var c="left:"+v+"px;";h.attr("style",c),p.attr("style",c+"margin-left:"+-Math.round(p.outerWidth()/2)+"px")}else{c="top:"+v+"px;";h.attr("style",c),p.attr("style",c+"margin-left:"+-Math.round(p.outerWidth())+"px")}}a.value=a.range?s:s[0],$(e).val(a.range?s.join(a.separator):s[0]),n.join(",")!=s.join(",")&&a.onChange.call(e,a.value,a.range?n:n[0])}function _c(e){var t=$.data(e,"slider").options,i=t.onChange;t.onChange=function(){},_27(e,t.value),t.onChange=i}function _33(e,t){var i=$.data(e,"slider"),a=i.options,r=i.slider,n="h"==a.mode?r.width():r.height(),s=a.converter.toPosition.call(e,t,n);return"v"==a.mode&&(s=r.height()-s),a.reversed&&(s=n-s),s}function _25(e,t){var i=$.data(e,"slider"),a=i.options,r=i.slider,n="h"==a.mode?r.width():r.height();t="h"==a.mode?a.reversed?n-t:t:a.reversed?t:n-t;return a.converter.toValue.call(e,t,n)}$.fn.slider=function(e,t){return"string"==typeof e?$.fn.slider.methods[e](this,t):(e=e||{},this.each((function(){var t=$.data(this,"slider");t?$.extend(t.options,e):(t=$.data(this,"slider",{options:$.extend({},$.fn.slider.defaults,$.fn.slider.parseOptions(this),e),slider:_1(this)}),$(this)._propAttr("disabled",!1));var i=t.options;i.min=parseFloat(i.min),i.max=parseFloat(i.max),i.range?($.isArray(i.value)||(i.value=$.map(String(i.value).split(i.separator),(function(e){return parseFloat(e)}))),i.value.length<2&&i.value.push(i.max)):i.value=parseFloat(i.value),i.step=parseFloat(i.step),i.originalValue=i.value,_17(this),_d(this),_6(this)})))},$.fn.slider.methods={options:function(e){return $.data(e[0],"slider").options},destroy:function(e){return e.each((function(){$.data(this,"slider").slider.remove(),$(this).remove()}))},resize:function(e,t){return e.each((function(){_6(this,t)}))},getValue:function(e){return e.slider("options").value},getValues:function(e){return e.slider("options").value},setValue:function(e,t){return e.each((function(){_27(this,[t])}))},setValues:function(e,t){return e.each((function(){_27(this,t)}))},clear:function(e){return e.each((function(){var e=$(this).slider("options");_27(this,e.range?[e.min,e.max]:[e.min])}))},reset:function(e){return e.each((function(){var e=$(this).slider("options");$(this).slider(e.range?"setValues":"setValue",e.originalValue)}))},enable:function(e){return e.each((function(){$.data(this,"slider").options.disabled=!1,_17(this)}))},disable:function(e){return e.each((function(){$.data(this,"slider").options.disabled=!0,_17(this)}))}},$.fn.slider.parseOptions=function(_4c){var t=$(_4c);return $.extend({},$.parser.parseOptions(_4c,["width","height","mode",{reversed:"boolean",showTip:"boolean",range:"boolean",min:"number",max:"number",step:"number"}]),{value:t.val()||void 0,disabled:!!t.attr("disabled")||void 0,rule:t.attr("rule")?eval(t.attr("rule")):void 0})},$.fn.slider.defaults={width:"auto",height:"auto",mode:"h",reversed:!1,showTip:!1,disabled:!1,range:!1,value:0,separator:",",min:0,max:100,step:1,rule:[],tipFormatter:function(e){return e},converter:{toPosition:function(e,t){var i=$(this).slider("options");return(e-i.min)/(i.max-i.min)*t},toValue:function(e,t){var i=$(this).slider("options");return i.min+(i.max-i.min)*(e/t)}},onChange:function(e,t){},onSlideStart:function(e){},onSlideEnd:function(e){},onComplete:function(e){}}})(jQuery);