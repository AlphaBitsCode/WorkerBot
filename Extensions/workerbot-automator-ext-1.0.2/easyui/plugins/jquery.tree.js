/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){function t(t){var n=e.data(t,"tree"),r=n.options,o=n.tree;function a(t,n){return e(t).closest("ul.tree").tree(n?"pop":"getData",t)}function i(t,n){e(t).draggable("proxy").find("span.tree-dnd-icon").removeClass("tree-dnd-yes tree-dnd-no").addClass(n?"tree-dnd-yes":"tree-dnd-no")}function s(n,o){function i(){var i=a(n,!0);e(t).tree("append",{parent:o,data:[i]}),r.onDrop.call(t,o,i,"append")}"closed"==C(t,o).state?c(t,o,(function(){i()})):i()}function d(n,o,i){var s={};"top"==i?s.before=o:s.after=o;var d=a(n,!0);s.data=d,e(t).tree("insert",s),r.onDrop.call(t,o,d,i)}n.disabledNodes=[],r.dnd=!0,o.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(t){var n=e('<div class="tree-node-proxy"></div>').appendTo("body");return n.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+e(t).find(".tree-title").html()),n.hide(),n},deltaX:15,deltaY:15,onBeforeDrag:function(n){if(0==r.onBeforeDrag.call(t,C(t,this)))return!1;if(e(n.target).hasClass("tree-hit")||e(n.target).hasClass("tree-checkbox"))return!1;if(1!=n.which)return!1;var o=e(this).find("span.tree-indent");o.length&&(n.data.offsetWidth-=o.length*o.width())},onStartDrag:function(o){e(this).next("ul").find("div.tree-node").each((function(){e(this).droppable("disable"),n.disabledNodes.push(this)})),e(this).draggable("proxy").css({left:-1e4,top:-1e4}),r.onStartDrag.call(t,C(t,this));var a=C(t,this);null==a.id&&(a.id="easyui_tree_node_id_temp",u(t,a)),n.draggingNodeId=a.id},onDrag:function(t){var n=t.pageX,r=t.pageY,o=t.data.startX,a=t.data.startY;Math.sqrt((n-o)*(n-o)+(r-a)*(r-a))>3&&e(this).draggable("proxy").show(),this.pageY=t.pageY},onStopDrag:function(){for(var o=0;o<n.disabledNodes.length;o++)e(n.disabledNodes[o]).droppable("enable");n.disabledNodes=[];var a=m(t,n.draggingNodeId);a&&"easyui_tree_node_id_temp"==a.id&&(a.id="",u(t,a)),r.onStopDrag.call(t,a)}}).droppable({accept:"div.tree-node",onDragEnter:function(o,s){0==r.onDragEnter.call(t,this,a(s))&&(i(s,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),e(this).droppable("disable"),n.disabledNodes.push(this))},onDragOver:function(o,s){if(!e(this).droppable("options").disabled){var d=s.pageY,c=e(this).offset().top,l=c+e(this).outerHeight();i(s,!0),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),d>c+(l-c)/2?l-d<5?e(this).addClass("tree-node-bottom"):e(this).addClass("tree-node-append"):d-c<5?e(this).addClass("tree-node-top"):e(this).addClass("tree-node-append"),0==r.onDragOver.call(t,this,a(s))&&(i(s,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),e(this).droppable("disable"),n.disabledNodes.push(this))}},onDragLeave:function(n,o){i(o,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),r.onDragLeave.call(t,this,a(o))},onDrop:function(n,o){var i,c;e(this).hasClass("tree-node-append")?(i=s,c="append"):(i=d,c=e(this).hasClass("tree-node-top")?"top":"bottom"),0!=r.onBeforeDrop.call(t,this,a(o),c)?(i(o,this,c),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom")):e(this).removeClass("tree-node-append tree-node-top tree-node-bottom")}})}function n(t,n,i,s){var d=e.data(t,"tree").options;if(d.checkbox){var c=C(t,n);if(c.checkState){var l=e(n).find(".tree-checkbox");if(null==i&&(l.hasClass("tree-checkbox1")?i=!1:l.hasClass("tree-checkbox0")?i=!0:(null==c._checked&&(c._checked=e(n).find(".tree-checkbox").hasClass("tree-checkbox1")),i=!c._checked)),c._checked=i,i){if(l.hasClass("tree-checkbox1"))return}else if(l.hasClass("tree-checkbox0"))return;(s||0!=d.onBeforeCheck.call(t,c,i))&&(d.cascadeCheck?(!function(t,n,o){var i=e.data(t,"tree").options,s=o?1:0;if(r(t,n,s),i.deepCheck)e.easyui.forEach(n.children||[],!0,(function(e){r(t,e,s)}));else{var d=[];n.children&&n.children.length&&d.push(n),e.easyui.forEach(n.children||[],!0,(function(e){e.hidden||(r(t,e,s),e.children&&e.children.length&&d.push(e))}));for(var c=d.length-1;c>=0;c--){var l=d[c];r(t,l,a(l))}}}(t,c,i),o(t,c)):r(t,c,i?"1":"0"),s||d.onCheck.call(t,c,i))}}}function r(t,n,r){var o=e.data(t,"tree").options;if(n.checkState&&null!=r&&(!n.hidden||o.deepCheck)){var a=e("#"+n.domId).find(".tree-checkbox");n.checkState=["unchecked","checked","indeterminate"][r],n.checked="checked"==n.checkState,a.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),a.addClass("tree-checkbox"+r)}}function o(t,n){var i=g(t,e("#"+n.domId)[0]);i&&(r(t,i,a(i)),o(t,i))}function a(t){var n=0,r=0,o=0;if(e.easyui.forEach(t.children||[],!1,(function(e){e.checkState&&(o++,"checked"==e.checkState?r++:"unchecked"==e.checkState&&n++)})),0!=o){return n==o?0:r==o?1:2}}function i(r,o,a,i,d){var c=e.data(r,"tree"),l=c.options,h=e(o).prevAll("div.tree-node:first");a=l.loadFilter.call(r,a,h[0]);var f=k(r,"domId",h.attr("id"));i?f?f.children?f.children=f.children.concat(a):f.children=a:c.data=c.data.concat(a):(f?f.children=a:c.data=a,e(o).empty()),l.view.render.call(l.view,r,o,a),l.dnd&&t(r),f&&u(r,f);for(var p=0;p<c.tmpIds.length;p++)n(r,e("#"+c.tmpIds[p])[0],!0,!0);c.tmpIds=[],setTimeout((function(){s(r,r)}),0),d||l.onLoadSuccess.call(r,f,a)}function s(t,n,r){if(e.data(t,"tree").options.lines){if(e(t).addClass("tree-lines"),!r){r=!0,e(t).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),e(t).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var o=e(t).tree("getRoots");o.length>1?e(o[0].target).addClass("tree-root-first"):1==o.length&&e(o[0].target).addClass("tree-root-one")}e(n).children("li").each((function(){var n,o,a=e(this).children("div.tree-node"),i=a.next("ul");i.length?(e(this).next().length&&(o=(n=a).find("span.tree-indent, span.tree-hit").length,n.next().find("div.tree-node").each((function(){e(this).children("span:eq("+(o-1)+")").addClass("tree-line")}))),s(t,i,r)):a.find("span.tree-icon").prev("span.tree-indent").addClass("tree-join")})),e(n).children("li:last").children("div.tree-node").addClass("tree-node-last").children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")}else e(t).removeClass("tree-lines")}function d(t,n,r,o){var a=e.data(t,"tree").options;r=e.extend({},a.queryParams,r||{});var s=null;if(t!=n){var d=e(n).prev();s=C(t,d[0])}if(0!=a.onBeforeLoad.call(t,s,r)){var c=e(n).prev().children("span.tree-folder");c.addClass("tree-loading");var l=a.loader.call(t,r,(function(e){c.removeClass("tree-loading"),i(t,n,e),o&&o()}),(function(){c.removeClass("tree-loading"),a.onLoadError.apply(t,arguments),o&&o()}));0==l&&c.removeClass("tree-loading")}}function c(t,n,r){var o=e.data(t,"tree").options,a=e(n).children("span.tree-hit");if(0!=a.length&&!a.hasClass("tree-expanded")){var i=C(t,n);if(0!=o.onBeforeExpand.call(t,i)){a.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),a.next().addClass("tree-folder-open");var s=e(n).next();if(s.length)o.animate?s.slideDown("normal",(function(){i.state="open",o.onExpand.call(t,i),r&&r()})):(s.css("display","block"),i.state="open",o.onExpand.call(t,i),r&&r());else{var c=e('<ul style="display:none"></ul>').insertAfter(n);d(t,c[0],{id:i.id},(function(){c.is(":empty")&&c.remove(),o.animate?c.slideDown("normal",(function(){i.state="open",o.onExpand.call(t,i),r&&r()})):(c.css("display","block"),i.state="open",o.onExpand.call(t,i),r&&r())}))}}}}function l(t,n){var r=e.data(t,"tree").options,o=e(n).children("span.tree-hit");if(0!=o.length&&!o.hasClass("tree-collapsed")){var a=C(t,n);if(0!=r.onBeforeCollapse.call(t,a)){o.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),o.next().removeClass("tree-folder-open");var i=e(n).next();r.animate?i.slideUp("normal",(function(){a.state="closed",r.onCollapse.call(t,a)})):(i.css("display","none"),a.state="closed",r.onCollapse.call(t,a))}}}function h(t,n){var r=e(n).children("span.tree-hit");0!=r.length&&(r.hasClass("tree-expanded")?l(t,n):c(t,n))}function f(t,n){var r=e(n.parent),o=n.data;if(o&&(o=e.isArray(o)?o:[o]).length){var a;if(0==r.length)a=e(t);else{if(y(t,r[0])){var s=r.find("span.tree-icon");s.removeClass("tree-file").addClass("tree-folder tree-folder-open");var d=e('<span class="tree-hit tree-expanded"></span>').insertBefore(s);d.prev().length&&d.prev().remove()}(a=r.next()).length||(a=e("<ul></ul>").insertAfter(r))}i(t,a[0],o,!0,!0)}}function u(t,r){var i=e.data(t,"tree").options,s=e(r.target),d=C(t,r.target);d.iconCls&&s.find(".tree-icon").removeClass(d.iconCls),e.extend(d,r),s.find(".tree-title").html(i.formatter.call(t,d)),d.iconCls&&s.find(".tree-icon").addClass(d.iconCls),function(t,r){var i=e.data(t,"tree").options;if(i.checkbox){var s=e(r),d=s.find(".tree-checkbox"),c=C(t,r);if(i.view.hasCheckbox(t,c))if(d.length||(c.checkState=c.checkState||"unchecked",e('<span class="tree-checkbox"></span>').insertBefore(s.find(".tree-title"))),"checked"==c.checkState)n(t,r,!0,!0);else if("unchecked"==c.checkState)n(t,r,!1,!0);else{var l=a(c);0===l?n(t,r,!1,!0):1===l&&n(t,r,!0,!0)}else d.remove(),c.checkState=void 0,c.checked=void 0,o(t,c)}}(t,r.target)}function p(t){for(var n=e.data(t,"tree").data,r=0;r<n.length;r++)b(n[r]);return n}function v(t,n){var r=[],o=C(t,n),a=o?o.children||[]:e.data(t,"tree").data;return e.easyui.forEach(a,!0,(function(e){r.push(b(e))})),r}function g(t,n){return C(t,e(n).closest("ul").prevAll("div.tree-node:first")[0])}function C(t,n){return k(t,"domId",e(n).attr("id"))}function m(t,n){if(e.isFunction(n))var r=n;else n="object"==typeof n?n:{id:n},r=function(e){for(var t in n)if(e[t]!=n[t])return!1;return!0};var o=null,a=e.data(t,"tree").data;return e.easyui.forEach(a,!0,(function(e){if(1==r.call(t,e))return o=b(e),!1})),o}function k(e,t,n){var r={};return r[t]=n,m(e,r)}function b(t){return t.target=e("#"+t.domId)[0],t}function x(t,n){var r=e.data(t,"tree").options,o=C(t,n);0!=r.onBeforeSelect.call(t,o)&&(e(t).find("div.tree-node-selected").removeClass("tree-node-selected"),e(n).addClass("tree-node-selected"),r.onSelect.call(t,o))}function y(t,n){return 0==e(n).children("span.tree-hit").length}function D(t,n){var r=e.data(t,"tree").options;e(n).css("position","");var o=e(n).find("input.tree-editor"),a=o.val();o.remove();var i=C(t,n);i.text=a,u(t,i),r.onAfterEdit.call(t,i)}function S(t,n){var r=e.data(t,"tree").options;e(n).css("position",""),e(n).find("input.tree-editor").remove();var o=C(t,n);u(t,o),r.onCancelEdit.call(t,o)}e.fn.tree=function(t,r){if("string"==typeof t)return e.fn.tree.methods[t](this,r);t=t||{};return this.each((function(){var r,o,a,s,c,l=e.data(this,"tree");if(l)r=e.extend(l.options,t),l.options=r;else{r=e.extend({},e.fn.tree.defaults,e.fn.tree.parseOptions(this),t),e.data(this,"tree",{options:r,tree:(o=this,a=e(o),a.addClass("tree"),a),data:[],tmpIds:[]});var f=e.fn.tree.parseData(this);f.length&&i(this,this,f)}s=this,c=e.data(s,"tree").options,e(s)._unbind()._bind("mouseover",(function(t){var n=e(t.target),r=n.closest("div.tree-node");r.length&&(r.addClass("tree-node-hover"),n.hasClass("tree-hit")&&(n.hasClass("tree-expanded")?n.addClass("tree-expanded-hover"):n.addClass("tree-collapsed-hover")),t.stopPropagation())}))._bind("mouseout",(function(t){var n=e(t.target),r=n.closest("div.tree-node");r.length&&(r.removeClass("tree-node-hover"),n.hasClass("tree-hit")&&(n.hasClass("tree-expanded")?n.removeClass("tree-expanded-hover"):n.removeClass("tree-collapsed-hover")),t.stopPropagation())}))._bind("click",(function(t){var r=e(t.target),o=r.closest("div.tree-node");if(o.length){if(r.hasClass("tree-hit"))return h(s,o[0]),!1;if(r.hasClass("tree-checkbox"))return n(s,o[0]),!1;x(s,o[0]),c.onClick.call(s,C(s,o[0])),t.stopPropagation()}}))._bind("dblclick",(function(t){var n=e(t.target).closest("div.tree-node");n.length&&(x(s,n[0]),c.onDblClick.call(s,C(s,n[0])),t.stopPropagation())}))._bind("contextmenu",(function(t){var n=e(t.target).closest("div.tree-node");n.length&&(c.onContextMenu.call(s,t,C(s,n[0])),t.stopPropagation())})),r.data&&i(this,this,e.extend(!0,[],r.data)),d(this,this)}))},e.fn.tree.methods={options:function(t){return e.data(t[0],"tree").options},loadData:function(e,t){return e.each((function(){i(this,this,t)}))},getNode:function(e,t){return C(e[0],t)},getData:function(t,n){return r=t[0],(o=C(r,n))&&o.children&&e.easyui.forEach(o.children,!0,(function(e){b(e)})),o;var r,o},reload:function(t,n){return t.each((function(){if(n){var t=e(n);t.children("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),t.next().remove(),c(this,n)}else e(this).empty(),d(this,this)}))},getRoot:function(e,t){return function(e,t){if(t){for(var n=g(e,t);n;)n=g(e,t=n.target);return C(e,t)}var r=p(e);return r.length?r[0]:null}(e[0],t)},getRoots:function(e){return p(e[0])},getParent:function(e,t){return g(e[0],t)},getChildren:function(e,t){return v(e[0],t)},getChecked:function(t,n){return function(t,n){n=n||"checked",e.isArray(n)||(n=[n]);var r=[];return e.easyui.forEach(e.data(t,"tree").data,!0,(function(t){t.checkState&&-1!=e.easyui.indexOfArray(n,t.checkState)&&r.push(b(t))})),r}(t[0],n)},getSelected:function(t){return n=t[0],(r=e(n).find("div.tree-node-selected")).length?C(n,r[0]):null;var n,r},isLeaf:function(e,t){return y(e[0],t)},find:function(e,t){return m(e[0],t)},findBy:function(e,t){return k(e[0],t.field,t.value)},select:function(e,t){return e.each((function(){x(this,t)}))},check:function(e,t){return e.each((function(){n(this,t,!0)}))},uncheck:function(e,t){return e.each((function(){n(this,t,!1)}))},collapse:function(e,t){return e.each((function(){l(this,t)}))},expand:function(e,t){return e.each((function(){c(this,t)}))},collapseAll:function(e,t){return e.each((function(){!function(e,t){var n=v(e,t);t&&n.unshift(C(e,t));for(var r=0;r<n.length;r++)l(e,n[r].target)}(this,t)}))},expandAll:function(e,t){return e.each((function(){!function(e,t){var n=v(e,t);t&&n.unshift(C(e,t));for(var r=0;r<n.length;r++)c(e,n[r].target)}(this,t)}))},expandTo:function(e,t){return e.each((function(){!function(e,t){for(var n=[],r=g(e,t);r;)n.unshift(r),r=g(e,r.target);for(var o=0;o<n.length;o++)c(e,n[o].target)}(this,t)}))},scrollTo:function(t,n){return t.each((function(){!function(t,n){for(var r=e(t).parent();"BODY"!=r[0].tagName&&"auto"!=r.css("overflow-y");)r=r.parent();var o=e(n),a=o.offset().top;if("BODY"!=r[0].tagName){var i=r.offset().top;a<i?r.scrollTop(r.scrollTop()+a-i):a+o.outerHeight()>i+r.outerHeight()-18&&r.scrollTop(r.scrollTop()+a+o.outerHeight()-i-r.outerHeight()+18)}else r.scrollTop(a)}(this,n)}))},toggle:function(e,t){return e.each((function(){h(this,t)}))},append:function(e,t){return e.each((function(){f(this,t)}))},insert:function(t,n){return t.each((function(){!function(t,n){var r=n.before||n.after,o=g(t,r),a=n.data;if(a&&(a=e.isArray(a)?a:[a]).length){f(t,{parent:o?o.target:null,data:a});for(var i=o?o.children:e(t).tree("getRoots"),s=0;s<i.length;s++)if(i[s].domId==e(r).attr("id")){for(var d=a.length-1;d>=0;d--)i.splice(n.before?s:s+1,0,a[d]);i.splice(i.length-a.length,a.length);break}var c=e();for(s=0;s<a.length;s++)c=c.add(e("#"+a[s].domId).parent());n.before?c.insertBefore(e(r).parent()):c.insertAfter(e(r).parent())}}(this,n)}))},remove:function(t,n){return t.each((function(){!function(t,n){var r=function(n){for(var r=e(n).attr("id"),o=g(t,n),a=o?o.children:e.data(t,"tree").data,i=0;i<a.length;i++)if(a[i].domId==r){a.splice(i,1);break}return o}(n);if(e(n).parent().remove(),r){if(!r.children||!r.children.length){var o=e(r.target);o.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),o.find(".tree-hit").remove(),e('<span class="tree-indent"></span>').prependTo(o),o.next().remove()}u(t,r)}s(t,t)}(this,n)}))},pop:function(e,t){var n=e.tree("getData",t);return e.tree("remove",t),n},update:function(t,n){return t.each((function(){u(this,e.extend({},n,{checkState:n.checked?"checked":!1===n.checked?"unchecked":void 0}))}))},enableDnd:function(e){return e.each((function(){t(this)}))},disableDnd:function(t){return t.each((function(){!function(t){e.data(t,"tree").options.dnd=!1;var n=e(t).find("div.tree-node");n.draggable("disable"),n.css("cursor","pointer")}(this)}))},beginEdit:function(t,n){return t.each((function(){!function(t,n){var r=e.data(t,"tree").options,o=C(t,n);if(0!=r.onBeforeEdit.call(t,o)){e(n).css("position","relative");var a=e(n).find(".tree-title"),i=a.outerWidth();a.empty();var s=e('<input class="tree-editor">').appendTo(a);s.val(o.text).focus(),s.width(i+20),s._outerHeight(r.editorHeight),s._bind("click",(function(e){return!1}))._bind("mousedown",(function(e){e.stopPropagation()}))._bind("mousemove",(function(e){e.stopPropagation()}))._bind("keydown",(function(e){return 13==e.keyCode?(D(t,n),!1):27==e.keyCode?(S(t,n),!1):void 0}))._bind("blur",(function(e){e.stopPropagation(),D(t,n)}))}}(this,n)}))},endEdit:function(e,t){return e.each((function(){D(this,t)}))},cancelEdit:function(e,t){return e.each((function(){S(this,t)}))},doFilter:function(t,n){return t.each((function(){!function(t,n){var r=e.data(t,"tree"),o=r.options,a={};for(var i in e.easyui.forEach(r.data,!0,(function(r){o.filter.call(t,n,r)?(e("#"+r.domId).removeClass("tree-node-hidden"),a[r.domId]=1,r.hidden=!1):(e("#"+r.domId).addClass("tree-node-hidden"),r.hidden=!0)})),a)s(i);function s(n){for(var r=e(t).tree("getParent",e("#"+n)[0]);r;)e(r.target).removeClass("tree-node-hidden"),r.hidden=!1,r=e(t).tree("getParent",r.target)}}(this,n)}))}},e.fn.tree.parseOptions=function(t){e(t);return e.extend({},e.parser.parseOptions(t,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},e.fn.tree.parseData=function(t){var n=[];return function t(n,r){r.children("li").each((function(){var r=e(this),o=e.extend({},e.parser.parseOptions(this,["id","iconCls","state"]),{checked:!!r.attr("checked")||void 0});o.text=r.children("span").html(),o.text||(o.text=r.html());var a=r.children("ul");a.length&&(o.children=[],t(o.children,a)),n.push(o)}))}(n,e(t)),n};var E=1,_={render:function(t,n,r){var o=e.data(t,"tree"),a=o.options,i=e(n).prev(".tree-node"),s=i.length?e(t).tree("getNode",i[0]):null,d=i.find("span.tree-indent, span.tree-hit").length,c=e(t).attr("id")||"",l=function n(r,i){for(var d=[],l=0;l<i.length;l++){var h=i[l];"open"!=h.state&&"closed"!=h.state&&(h.state="open"),h.domId=c+"_easyui_tree_"+E++,d.push("<li>"),d.push('<div id="'+h.domId+'" class="tree-node'+(h.nodeCls?" "+h.nodeCls:"")+'">');for(var f=0;f<r;f++)d.push('<span class="tree-indent"></span>');if("closed"==h.state?(d.push('<span class="tree-hit tree-collapsed"></span>'),d.push('<span class="tree-icon tree-folder '+(h.iconCls?h.iconCls:"")+'"></span>')):h.children&&h.children.length?(d.push('<span class="tree-hit tree-expanded"></span>'),d.push('<span class="tree-icon tree-folder tree-folder-open '+(h.iconCls?h.iconCls:"")+'"></span>')):(d.push('<span class="tree-indent"></span>'),d.push('<span class="tree-icon tree-file '+(h.iconCls?h.iconCls:"")+'"></span>')),this.hasCheckbox(t,h)){var u=0;s&&"checked"==s.checkState&&a.cascadeCheck?(u=1,h.checked=!0):h.checked&&e.easyui.addArrayItem(o.tmpIds,h.domId),h.checkState=u?"checked":"unchecked",d.push('<span class="tree-checkbox tree-checkbox'+u+'"></span>')}else h.checkState=void 0,h.checked=void 0;if(d.push('<span class="tree-title">'+a.formatter.call(t,h)+"</span>"),d.push("</div>"),h.children&&h.children.length){var p=n.call(this,r+1,h.children);d.push('<ul style="display:'+("closed"==h.state?"none":"block")+'">'),(d=d.concat(p)).push("</ul>")}d.push("</li>")}return d}.call(this,d,r);e(n).append(l.join(""))},hasCheckbox:function(t,n){var r=e.data(t,"tree").options;if(r.checkbox){if(e.isFunction(r.checkbox))return!!r.checkbox.call(t,n);if(!r.onlyLeafCheck)return!0;if(!("open"!=n.state||n.children&&n.children.length))return!0}return!1}};e.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,editorHeight:26,data:null,queryParams:{},formatter:function(e){return e.text},filter:function(t,n){var r=[];e.map(e.isArray(t)?t:[t],(function(t){(t=e.trim(t))&&r.push(t)}));for(var o=0;o<r.length;o++){if(n.text.toLowerCase().indexOf(r[o].toLowerCase())>=0)return!0}return!r.length},loader:function(t,n,r){var o=e(this).tree("options");if(!o.url)return!1;e.ajax({type:o.method,url:o.url,data:t,dataType:"json",success:function(e){n(e)},error:function(){r.apply(this,arguments)}})},loadFilter:function(e,t){return e},view:_,onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onClick:function(e){},onDblClick:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeSelect:function(e){},onSelect:function(e){},onContextMenu:function(e,t){},onBeforeDrag:function(e){},onStartDrag:function(e){},onStopDrag:function(e){},onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onBeforeDrop:function(e,t,n){},onDrop:function(e,t,n){},onBeforeEdit:function(e){},onAfterEdit:function(e){},onCancelEdit:function(e){}}}(jQuery);