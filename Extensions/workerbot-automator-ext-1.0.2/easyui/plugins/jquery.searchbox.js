/* Copyright (C) 2023 by WorkerBot.AI */
(function($){function _1(e){var t=$.data(e,"searchbox"),n=t.options,a=$.extend(!0,[],n.icons);a.push({iconCls:"searchbox-button",handler:function(e){var t=$(e.data.target);t.searchbox("options").searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName"))}}),function(){if(n.menu){"string"==typeof n.menu?t.menu=$(n.menu).menu():(t.menu||(t.menu=$("<div></div>").appendTo("body").menu()),t.menu.menu("clear").menu("appendItems",n.menu));var e=t.menu.menu("options"),a=e.onClick;e.onClick=function(e){o(e),a.call(this,e)}}else t.menu&&t.menu.menu("destroy"),t.menu=null}();var r=function(){if(t.menu){var e=t.menu.children("div.menu-item:first");return t.menu.children("div.menu-item").each((function(){if($.extend({},$.parser.parseOptions(this),{selected:!!$(this).attr("selected")||void 0}).selected)return e=$(this),!1})),t.menu.menu("getItem",e[0])}return null}();function o(a){a&&($(e).textbox("button").menubutton({text:a.text,iconCls:a.iconCls||null,menu:t.menu,menuAlign:n.buttonAlign,duration:n.duration,showEvent:n.showEvent,hideEvent:n.hideEvent,plain:!1}),t.searchbox.find("input.textbox-value").attr("name",a.name||a.text),$(e).searchbox("resize"))}$(e).addClass("searchbox-f").textbox($.extend({},n,{icons:a,buttonText:r?r.text:""})),$(e).attr("searchboxName",$(e).attr("textboxName")),t.searchbox=$(e).next(),t.searchbox.addClass("searchbox"),o(r)}$.fn.searchbox=function(e,t){if("string"==typeof e){var n=$.fn.searchbox.methods[e];return n?n(this,t):this.textbox(e,t)}return e=e||{},this.each((function(){var t=$.data(this,"searchbox");t?$.extend(t.options,e):$.data(this,"searchbox",{options:$.extend({},$.fn.searchbox.defaults,$.fn.searchbox.parseOptions(this),e)}),_1(this)}))},$.fn.searchbox.methods={options:function(e){var t=e.textbox("options");return $.extend($.data(e[0],"searchbox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},menu:function(e){return $.data(e[0],"searchbox").menu},getName:function(e){return $.data(e[0],"searchbox").searchbox.find("input.textbox-value").attr("name")},selectName:function(e,t){return e.each((function(){var e=$.data(this,"searchbox").menu;e&&e.children("div.menu-item").each((function(){if(e.menu("getItem",this).name==t)return $(this).trigger("click"),!1}))}))},destroy:function(e){return e.each((function(){var e=$(this).searchbox("menu");e&&e.menu("destroy"),$(this).textbox("destroy")}))}},$.fn.searchbox.parseOptions=function(_1a){var t=$(_1a);return $.extend({},$.fn.textbox.parseOptions(_1a),$.parser.parseOptions(_1a,["menu",{duration:"number"}]),{searcher:t.attr("searcher")?eval(t.attr("searcher")):void 0})},$.fn.searchbox.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:$.extend({},$.fn.textbox.defaults.inputEvents,{keydown:function(e){if(13==e.keyCode){e.preventDefault();var t=$(e.data.target),n=t.searchbox("options");return t.searchbox("setValue",$(this).val()),n.searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName")),!1}}}),buttonAlign:"left",menu:null,duration:100,showEvent:"mouseenter",hideEvent:"mouseleave",searcher:function(e,t){}})})(jQuery);