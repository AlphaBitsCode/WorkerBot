/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){var n=1;function t(n,t){var o=e(n).sidemenu("options");t&&e.extend(o,{width:t.width,height:t.height}),e(n)._size(o),e(n).find(".accordion").accordion("resize")}function o(n,t,o){var i=e(n).sidemenu("options"),a=e('<ul class="sidemenu-tree"></ul>').appendTo(t);a.tree({data:o,animate:i.animate,onBeforeSelect:function(e){if(e.children)return!1},onSelect:function(e){d(n,e.id,!0)},onExpand:function(e){s(n,e)},onCollapse:function(e){s(n,e)},onClick:function(n){n.children&&("open"==n.state?e(n.target).addClass("tree-node-nonleaf-collapsed"):e(n.target).removeClass("tree-node-nonleaf-collapsed"),e(this).tree("toggle",n.target))}}),a._unbind(".sidemenu")._bind("mouseleave.sidemenu",(function(){e(t).trigger("mouseleave")})),d(n,i.selectedItemId)}function i(n,t,i){var a=e(n).sidemenu("options");e(t).tooltip({content:e("<div></div>"),position:a.floatMenuPosition,valign:"top",data:i,onUpdate:function(t){var i=e(this).tooltip("options").data;t.accordion({width:a.floatMenuWidth,multiple:!1}).accordion("add",{title:i.text,collapsed:!1,collapsible:!1}),o(n,t.accordion("panels")[0],i.children)},onShow:function(){var n=e(this),t=n.tooltip("tip").addClass("sidemenu-tooltip");t.children(".tooltip-content").addClass("sidemenu"),t.find(".accordion").accordion("resize"),t.add(t.find("ul.tree"))._unbind(".sidemenu")._bind("mouseover.sidemenu",(function(){n.tooltip("show")}))._bind("mouseleave.sidemenu",(function(){n.tooltip("hide")})),n.tooltip("reposition")},onPosition:function(n,t){var o=e(this).tooltip("tip");a.collapsed?t+o.outerHeight()>e(window)._outerHeight()+e(document).scrollTop()&&(t=e(window)._outerHeight()+e(document).scrollTop()-o.outerHeight(),o.css("top",t)):o.css({left:-999999})}})}function a(n,t){e(n).find(".sidemenu-tree").each((function(){t(e(this))})),e(n).find(".tooltip-f").each((function(){var n=e(this).tooltip("tip");n&&(n.find(".sidemenu-tree").each((function(){t(e(this))})),e(this).tooltip("reposition"))}))}function d(n,t,o){var i=null,d=e(n).sidemenu("options");a(n,(function(n){n.find("div.tree-node-selected").removeClass("tree-node-selected");var o=n.tree("find",t);o&&(e(o.target).addClass("tree-node-selected"),d.selectedItemId=o.id,n.trigger("mouseleave.sidemenu"),i=o)})),o&&i&&d.onSelect.call(n,i)}function s(e,n){a(e,(function(e){var t=e.tree("find",n.id);if(t){var o=e.tree("options"),i=o.animate;o.animate=!1,e.tree("open"==n.state?"expand":"collapse",t.target),o.animate=i}}))}function l(n,t){var o=e(n).sidemenu("options");o.collapsed=t;var i=e(n).find(".accordion"),a=i.accordion("panels");if(i.accordion("options").animate=!1,o.collapsed){e(n).addClass("sidemenu-collapsed");for(var d=0;d<a.length;d++){(l=a[d]).panel("options").collapsed?o.data[d].state="closed":(o.data[d].state="open",i.accordion("unselect",d)),(s=l.panel("header")).find(".panel-title").html(""),s.find(".panel-tool").hide()}}else{e(n).removeClass("sidemenu-collapsed");for(d=0;d<a.length;d++){var s,l=a[d];"open"==o.data[d].state&&i.accordion("select",d),(s=l.panel("header")).find(".panel-title").html(l.panel("options").title),s.find(".panel-tool").show()}}i.accordion("options").animate=o.animate}e.fn.sidemenu=function(a,d){return"string"==typeof a?(0,e.fn.sidemenu.methods[a])(this,d):(a=a||{},this.each((function(){var d=e.data(this,"sidemenu");d?e.extend(d.options,a):(d=e.data(this,"sidemenu",{options:e.extend({},e.fn.sidemenu.defaults,e.fn.sidemenu.parseOptions(this),a)}),e(this).addClass("sidemenu")),t(this),function(t){var a=e(t).sidemenu("options");if(e(t).empty(),a.data){e.easyui.forEach(a.data,!0,(function(e){e.id||(e.id="_easyui_sidemenu_"+n++),e.iconCls||(e.iconCls="sidemenu-default-icon"),e.children&&(e.nodeCls="tree-node-nonleaf",e.state||(e.state="closed"),"open"==e.state?e.nodeCls="tree-node-nonleaf":e.nodeCls="tree-node-nonleaf tree-node-nonleaf-collapsed")}));var d=e("<div></div>").appendTo(t);d.accordion({fit:"auto"!=a.height,border:a.border,multiple:a.multiple});for(var s=a.data,l=0;l<s.length;l++){d.accordion("add",{title:s[l].text,selected:"open"==s[l].state,iconCls:s[l].iconCls,onBeforeExpand:function(){return!a.collapsed}});var c=d.accordion("panels")[l];o(t,c,s[l].children),i(t,c.panel("header"),s[l])}}}(this),l(this,d.options.collapsed)})))},e.fn.sidemenu.methods={options:function(e){return e.data("sidemenu").options},resize:function(e,n){return e.each((function(){t(this,n)}))},collapse:function(e){return e.each((function(){l(this,!0)}))},expand:function(e){return e.each((function(){l(this,!1)}))},destroy:function(n){return n.each((function(){var n;e(n=this).find(".tooltip-f").each((function(){e(this).tooltip("destroy")})),e(n).remove()}))}},e.fn.sidemenu.parseOptions=function(n){e(n);return e.extend({},e.parser.parseOptions(n,["width","height"]))},e.fn.sidemenu.defaults={width:200,height:"auto",border:!0,animate:!0,multiple:!0,collapsed:!1,data:null,floatMenuWidth:200,floatMenuPosition:"right",onSelect:function(e){}}}(jQuery);