/* Copyright (C) 2023 by WorkerBot.AI */
!function(e){function n(n){for(var i=n.data.target,r=e.data(i,"timespinner").options,s=e(i).timespinner("getSelectionStart"),a=0;a<r.selections.length;a++){var o=r.selections[a];if(s>=o[0]&&s<=o[1])return void t(i,a)}}function t(n,t){var i=e.data(n,"timespinner").options;null!=t&&(i.highlight=t);var r=i.selections[i.highlight];if(r){var s=e(n).timespinner("textbox");e(n).timespinner("setSelectionRange",{start:r[0],end:r[1]}),s.focus()}}e.fn.timespinner=function(n,t){if("string"==typeof n){var i=e.fn.timespinner.methods[n];return i?i(this,t):this.spinner(n,t)}return n=n||{},this.each((function(){var t=e.data(this,"timespinner");t?e.extend(t.options,n):e.data(this,"timespinner",{options:e.extend({},e.fn.timespinner.defaults,e.fn.timespinner.parseOptions(this),n)}),function(n){var t=e.data(n,"timespinner").options;e(n).addClass("timespinner-f").spinner(t);var i=t.formatter.call(n,t.parser.call(n,t.value));e(n).timespinner("initValue",i)}(this)}))},e.fn.timespinner.methods={options:function(n){var t=n.data("spinner")?n.spinner("options"):{};return e.extend(e.data(n[0],"timespinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setValue:function(n,t){return n.each((function(){var n,i,r,s;n=this,i=t,r=e.data(n,"timespinner").options,i=r.parser.call(n,i),s=r.formatter.call(n,i),e(n).spinner("setValue",s)}))},getHours:function(n){var t=e.data(n[0],"timespinner").options.parser.call(n[0],n.timespinner("getValue"));return t?t.getHours():null},getMinutes:function(n){var t=e.data(n[0],"timespinner").options.parser.call(n[0],n.timespinner("getValue"));return t?t.getMinutes():null},getSeconds:function(n){var t=e.data(n[0],"timespinner").options.parser.call(n[0],n.timespinner("getValue"));return t?t.getSeconds():null}},e.fn.timespinner.parseOptions=function(n){return e.extend({},e.fn.spinner.parseOptions(n),e.parser.parseOptions(n,["separator",{hour12:"boolean",showSeconds:"boolean",highlight:"number"}]))},e.fn.timespinner.defaults=e.extend({},e.fn.spinner.defaults,{inputEvents:e.extend({},e.fn.spinner.defaults.inputEvents,{click:function(e){n.call(this,e)},blur:function(n){var t=e(n.data.target);t.timespinner("setValue",t.timespinner("getText"))},keydown:function(n){if(13==n.keyCode){var t=e(n.data.target);t.timespinner("setValue",t.timespinner("getText"))}}}),formatter:function(n){if(!n)return"";var t=e(this).timespinner("options"),i=n.getHours(),r=n.getMinutes(),s=n.getSeconds(),a="";t.hour12&&(a=i>=12?t.ampm[1]:t.ampm[0],0==(i%=12)&&(i=12));var o=[u(i),u(r)];t.showSeconds&&o.push(u(s));var p=o.join(t.separator)+" "+a;return e.trim(p);function u(e){return(e<10?"0":"")+e}},parser:function(n){var t=e(this).timespinner("options"),i=a(n);if(i){var r=a(t.min),s=a(t.max);r&&r>i&&(i=r),s&&s<i&&(i=s)}return i;function a(e){if(!e)return null;var n=e.split(" "),i=n[0].split(t.separator),r=parseInt(i[0],10)||0,s=parseInt(i[1],10)||0,a=parseInt(i[2],10)||0;if(t.hour12){var o=n[1];o==t.ampm[1]&&r<12?r+=12:o==t.ampm[0]&&12==r&&(r-=12)}return new Date(1900,0,0,r,s,a)}},selections:[[0,2],[3,5],[6,8],[9,11]],separator:":",showSeconds:!1,highlight:0,hour12:!1,ampm:["AM","PM"],spin:function(n){!function(n,i){var r=e.data(n,"timespinner").options,s=e(n).timespinner("getValue"),a=r.selections[r.highlight],o=s.substring(0,a[0]),p=s.substring(a[0],a[1]),u=s.substring(a[1]);if(p==r.ampm[0])p=r.ampm[1];else if(p==r.ampm[1])p=r.ampm[0];else{if(p=parseInt(p,10)||0,r.selections.length-4==r.highlight&&r.hour12)if(12==p)p=0;else if(11==p&&!i){var l=u.replace(r.ampm[0],r.ampm[1]);u=u!=l?l:u.replace(r.ampm[1],r.ampm[0])}p+=r.increment*(i?-1:1)}var m=o+p+u;e(n).timespinner("setValue",m),t(n)}(this,n)}})}(jQuery);